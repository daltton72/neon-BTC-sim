<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no"/><title>Neon BTC Miner ‚Äî Prototype</title><style>:root{--bg-1:#000512;--neon-1:#00e0ff;--neon-2:#0078ff;--glass:rgba(255,255,255,0.03);--muted:rgba(160,245,255,0.12);--accent:#66f0ff;--panel:rgba(6,10,18,0.65);--radius:12px}html,body{height:100%;margin:0;background:linear-gradient(180deg,#000,#001020);display:flex;align-items:center;justify-content:center;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;color:#c8f9ff} .phone{width:100vw;height:100vh;max-width:100%;max-height:100%;border-radius:0;overflow:hidden;position:relative;background:#000;box-shadow:none;border:none;}canvas#bg{position:absolute;left:0;top:0;width:100%;height:100%;z-index:0;display:block}.ui{position:relative;z-index:2;height:100%;display:flex;flex-direction:column;padding:14px 14px 0 14px;box-sizing:border-box;gap:12px}header{display:flex;flex-direction:column;gap:8px}.title{display:flex;gap:10px;align-items:center}.logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(135deg,var(--neon-1),var(--neon-2));display:flex;align-items:center;justify-content:center;box-shadow:0 8px 30px rgba(0,200,255,0.06)}.logo svg{filter:drop-shadow(0 4px 18px rgba(0,200,255,0.12))}h1{font-size:14px;margin:0;letter-spacing:0.6px}.subtitle{font-size:11px;color:var(--muted)}.top-row{display:flex;gap:8px;align-items:center;width:100%}.balance{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:10px;padding:8px 12px;border:1px solid rgba(100,240,255,0.04);box-shadow:0 6px 20px rgba(0,0,0,0.7);flex:1;min-width:0}.balance .big{font-weight:700;color:var(--neon-1);font-size:15px}.balance .small{font-size:11px;color:#8feaffcc}.controls{display:flex;gap:6px;align-items:center;flex-shrink:0;flex-wrap:wrap}.skill-points-badge{background:linear-gradient(135deg,rgba(0,224,255,0.15),rgba(0,180,255,0.08));border:1px solid rgba(0,224,255,0.25);padding:6px 10px;border-radius:10px;font-weight:700;font-size:12px;color:var(--neon-1);display:flex;align-items:center;gap:6px;box-shadow:0 4px 12px rgba(0,224,255,0.15);position:absolute;top:60px;right:14px;z-index:100}.skill-points-badge svg{width:16px;height:16px;filter:drop-shadow(0 2px 6px rgba(0,224,255,0.4))}.settings-corner{position:absolute;top:14px;right:14px;z-index:100}.btn{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.16));border:1px solid rgba(0,230,255,0.06);padding:6px 8px;border-radius:10px;font-weight:700;font-size:12px;color:#eaffff;cursor:pointer;white-space:nowrap}.btn:active{transform:translateY(1px)}.btn.reset{background:transparent;border:1px solid rgba(255,255,255,0.04);color:#9befff;padding:6px 8px}.settings-btn{background:linear-gradient(135deg,rgba(0,224,255,0.1),rgba(0,180,255,0.05));border:1px solid rgba(0,224,255,0.2);width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s;flex-shrink:0}.settings-btn:hover{background:linear-gradient(135deg,rgba(0,224,255,0.2),rgba(0,180,255,0.1));border-color:rgba(0,224,255,0.4);box-shadow:0 0 12px rgba(0,224,255,0.2)}.settings-btn svg{width:18px;height:18px;filter:drop-shadow(0 2px 4px rgba(0,224,255,0.3))}.settings-modal{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,5,18,0.95);backdrop-filter:blur(10px);z-index:3000;display:none;align-items:center;justify-content:center;padding:20px;box-sizing:border-box}.settings-modal.show{display:flex}.settings-content{background:linear-gradient(135deg,rgba(0,30,50,0.95),rgba(0,10,20,0.98));border:2px solid rgba(0,224,255,0.3);border-radius:16px;padding:24px;max-width:300px;width:100%;box-shadow:0 20px 60px rgba(0,224,255,0.2),0 0 80px rgba(0,224,255,0.1) inset;position:relative}.settings-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid rgba(0,224,255,0.2)}.settings-header h2{margin:0;font-size:18px;color:var(--neon-1);letter-spacing:1px;text-transform:uppercase}.settings-option{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid rgba(0,224,255,0.08)}.settings-option:last-child{border-bottom:none}.settings-label{font-size:14px;color:#c8f9ff;font-weight:600}.toggle-switch{position:relative;width:50px;height:26px;background:rgba(255,255,255,0.1);border-radius:13px;cursor:pointer;transition:all 0.3s;border:1px solid rgba(0,224,255,0.2)}.toggle-switch.active{background:linear-gradient(135deg,rgba(0,224,255,0.4),rgba(0,180,255,0.3));border-color:rgba(0,224,255,0.5);box-shadow:0 0 12px rgba(0,224,255,0.3)}.toggle-slider{position:absolute;top:2px;left:2px;width:20px;height:20px;background:linear-gradient(135deg,#c8f9ff,#9feaff);border-radius:50%;transition:all 0.3s;box-shadow:0 2px 4px rgba(0,0,0,0.3)}.toggle-switch.active .toggle-slider{transform:translateX(24px);background:linear-gradient(135deg,var(--neon-1),#66f0ff);box-shadow:0 0 8px rgba(0,224,255,0.6)}.rigs{background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0));border-radius:12px;padding:10px;flex:1;overflow:auto;border:1px solid rgba(0,200,255,0.03);-webkit-overflow-scrolling:touch}.rig{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;margin-bottom:8px;background:linear-gradient(90deg,rgba(0,240,255,0.02),rgba(0,120,180,0.01));border:1px solid rgba(0,220,255,0.04);position:relative}.rig.locked{opacity:0.36;filter:grayscale(0.1) saturate(0.8)}.rig .icon{width:56px;height:56px;border-radius:8px;background:linear-gradient(135deg,rgba(0,180,255,0.12),rgba(0,100,160,0.06));display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(0,0,0,0.6) inset}.rig .meta{flex:1;display:flex;flex-direction:column;gap:4px;min-width:0}.rig .meta .name{font-weight:700}.rig .meta .desc{font-size:12px;color:#9feaff77}.progress-wrap{height:10px;background:rgba(255,255,255,0.02);border-radius:8px;overflow:hidden;border:1px solid rgba(0,180,255,0.04);min-width:180px}.progress{height:100%;width:0%;background:linear-gradient(90deg,var(--neon-1),var(--neon-2));box-shadow:0 6px 18px rgba(0,200,255,0.08)}.rig .buy{min-width:84px;text-align:center;padding:8px;border-radius:8px;background:linear-gradient(180deg,#002a3a,#001a26);border:1px solid rgba(0,220,255,0.08);color:var(--neon-1);font-weight:800}.rig .buy.locked{background:linear-gradient(180deg,#00131b,#000);color:#5ef0ff66;border:1px dashed rgba(80,200,255,0.04)}footer{display:flex;justify-content:space-between;align-items:center;font-size:12px;color:#9feaff88;padding-top:6px}.hint{font-size:11px;color:#77eaff66}.burst{position:absolute;left:0;top:0;pointer-events:none;width:100%;height:100%;overflow:visible}.stats-modal{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,5,18,0.95);backdrop-filter:blur(10px);z-index:1000;display:none;align-items:center;justify-content:center;padding:20px;box-sizing:border-box}.stats-modal.show{display:flex}.stats-content{background:linear-gradient(180deg,rgba(0,20,40,0.9),rgba(0,5,15,0.95));border:1px solid rgba(0,220,255,0.15);border-radius:16px;padding:20px;max-width:320px;width:100%;box-shadow:0 20px 60px rgba(0,200,255,0.1)}.stats-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(0,200,255,0.1)}.stats-header h2{margin:0;font-size:18px;color:var(--neon-1);letter-spacing:0.5px}.close-btn{background:transparent;border:1px solid rgba(0,200,255,0.2);color:var(--neon-1);width:28px;height:28px;border-radius:6px;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center}.close-btn:hover{background:rgba(0,200,255,0.05)}.stat-row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid rgba(0,200,255,0.04)}.stat-row:last-child{border-bottom:none}.stat-label{font-size:13px;color:#9feaff99}.stat-value{font-size:14px;font-weight:700;color:var(--neon-1)}.stat-section{margin-bottom:16px}.stat-section-title{font-size:12px;color:#77eaff66;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;font-weight:700}.page{display:none;flex-direction:column;flex:1;gap:12px;min-height:0}.page.active{display:flex}.bottom-nav{display:flex;justify-content:space-around;align-items:center;background:linear-gradient(180deg,rgba(0,20,40,0.8),rgba(0,5,15,0.9));border-top:1px solid rgba(0,220,255,0.1);padding:10px 0;margin:0 -14px;box-shadow:0 -4px 20px rgba(0,0,0,0.5);flex-shrink:0}.nav-btn{background:transparent;border:none;color:#9feaff77;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px 16px;border-radius:8px;transition:all 0.2s}.nav-btn:hover{background:rgba(0,200,255,0.05)}.nav-btn.active{color:var(--neon-1);background:rgba(0,200,255,0.08)}.nav-btn svg{width:24px;height:24px}.nav-btn span{font-size:10px;font-weight:700;letter-spacing:0.5px}.skill-tree-container{flex:1;overflow:hidden;padding:0;background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0));border-radius:12px;border:1px solid rgba(0,200,255,0.03);position:relative;touch-action:none}.skill-tree-wrapper{width:100%;height:100%;overflow:hidden;position:relative;cursor:grab;user-select:none}.skill-tree-wrapper:active{cursor:grabbing}.skill-tree-wrapper.zoomed{overflow:scroll}.motherboard{position:relative;width:2000px;height:2000px;display:flex;align-items:center;justify-content:center;padding:20px;background:radial-gradient(circle at center,rgba(0,224,255,0.03),transparent 70%);transform-origin:center center;transition:none;will-change:transform}.motherboard svg{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0}.motherboard::after{content:'';position:absolute;top:50%;left:50%;width:8px;height:8px;background:radial-gradient(circle,var(--neon-1),transparent);border-radius:50%;transform:translate(-50%,-50%);box-shadow:0 0 20px rgba(0,224,255,0.6);z-index:0}.zoom-controls{position:absolute;bottom:16px;right:16px;display:flex;flex-direction:column;gap:8px;z-index:10}.zoom-btn{width:36px;height:36px;background:linear-gradient(135deg,rgba(0,30,50,0.9),rgba(0,10,20,0.95));border:1px solid rgba(0,224,255,0.3);border-radius:8px;color:var(--neon-1);font-size:18px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(0,0,0,0.5);transition:all 0.2s}.zoom-btn:hover{background:linear-gradient(135deg,rgba(0,50,80,0.9),rgba(0,30,50,0.95));border-color:var(--neon-1);box-shadow:0 0 16px rgba(0,224,255,0.3)}.zoom-btn:active{transform:scale(0.95)}.skill-node{width:64px;height:64px;background:linear-gradient(135deg,rgba(0,30,50,0.7),rgba(0,10,20,0.9));border:2px solid rgba(0,200,255,0.2);border-radius:12px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;position:absolute;transition:all 0.3s;padding:6px;z-index:1;box-shadow:0 4px 12px rgba(0,0,0,0.4)}.skill-node:hover{transform:scale(1.12);border-color:rgba(0,224,255,0.5);box-shadow:0 6px 20px rgba(0,224,255,0.2)}.skill-node.unlocked{background:linear-gradient(135deg,rgba(0,120,180,0.4),rgba(0,60,100,0.6));border-color:var(--neon-1);box-shadow:0 0 24px rgba(0,224,255,0.4),0 4px 12px rgba(0,0,0,0.4)}.skill-node.available{background:linear-gradient(135deg,rgba(0,30,50,0.7),rgba(0,10,20,0.9));border-color:rgba(0,200,255,0.2);opacity:1}.skill-node.locked{opacity:0.2;cursor:not-allowed;filter:grayscale(0.8)}.skill-node.locked:hover{transform:none}.skill-node.center{width:76px;height:76px;border-width:3px;background:linear-gradient(135deg,rgba(0,120,180,0.5),rgba(0,60,100,0.7));box-shadow:0 0 40px rgba(0,224,255,0.5),0 4px 16px rgba(0,0,0,0.5)}.skill-icon{width:30px;height:30px;margin-bottom:3px}.skill-name{font-size:8.5px;font-weight:700;text-align:center;color:#c8f9ff;line-height:1.1;text-shadow:0 1px 3px rgba(0,0,0,0.5)}.skill-cost{font-size:7.5px;color:#9feaff99;margin-top:2px;font-weight:600}.sp-particle{position:absolute;pointer-events:none;z-index:9999;width:24px;height:24px}.skill-point-modal{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,5,18,0.92);backdrop-filter:blur(8px);z-index:2000;display:none;align-items:center;justify-content:center;padding:20px;box-sizing:border-box;animation:fadeIn 0.3s ease-out}.skill-point-modal.show{display:flex}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.vault-container{flex:1;overflow:auto;padding:20px;background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0));border-radius:12px;border:1px solid rgba(0,200,255,0.03);display:flex;flex-direction:column;gap:20px}.vault-display{background:linear-gradient(135deg,rgba(0,30,50,0.8),rgba(0,10,20,0.95));border:2px solid rgba(0,224,255,0.3);border-radius:16px;padding:24px;box-shadow:0 8px 32px rgba(0,224,255,0.15),0 0 60px rgba(0,224,255,0.05) inset;position:relative;overflow:hidden}.vault-display::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(0,224,255,0.5),transparent);animation:scanline 3s linear infinite}@keyframes scanline{0%{transform:translateY(0)}100%{transform:translateY(400px)}}.vault-title{font-size:14px;color:#9feaff99;text-transform:uppercase;letter-spacing:2px;margin-bottom:16px;font-weight:700;text-align:center}.vault-amount{font-size:36px;font-weight:800;color:var(--neon-1);text-align:center;font-family:'Courier New',monospace;letter-spacing:2px;text-shadow:0 0 20px rgba(0,224,255,0.6),0 0 40px rgba(0,224,255,0.3);margin-bottom:8px}.vault-label{font-size:11px;color:#77eaff66;text-align:center;text-transform:uppercase;letter-spacing:1px}.vault-actions{display:flex;gap:12px}.vault-btn{flex:1;background:linear-gradient(135deg,rgba(0,224,255,0.15),rgba(0,180,255,0.08));border:1px solid rgba(0,224,255,0.3);padding:14px;border-radius:12px;font-weight:800;font-size:13px;color:var(--neon-1);cursor:pointer;transition:all 0.2s;box-shadow:0 4px 16px rgba(0,224,255,0.1);text-align:center}.vault-btn:hover{background:linear-gradient(135deg,rgba(0,224,255,0.25),rgba(0,180,255,0.15));box-shadow:0 6px 24px rgba(0,224,255,0.3);transform:translateY(-2px)}.vault-btn:active{transform:translateY(0)}.vault-btn.disabled{opacity:0.3;cursor:not-allowed;pointer-events:none}.coin-stack{background:linear-gradient(180deg,rgba(0,20,40,0.6),rgba(0,5,15,0.8));border:1px solid rgba(0,200,255,0.15);border-radius:12px;padding:20px;padding-top:40px;min-height:300px;max-height:450px;display:flex;justify-content:space-evenly;align-items:flex-end;gap:20px;position:relative;overflow-y:auto;overflow-x:hidden}.coin-stack-title{position:absolute;top:12px;left:50%;transform:translateX(-50%);font-size:11px;color:#77eaff66;text-transform:uppercase;letter-spacing:1px;font-weight:700;z-index:10}.coin-column{display:flex;flex-direction:column-reverse;gap:2px;align-items:center;min-height:100%;flex:1 1 33%;width:33%}.coin{width:48px;height:18px;background:linear-gradient(180deg,#ffd700 0%,#ffed4e 30%,#ffa500 70%,#ff8c00 100%);border-radius:50%;position:relative;box-shadow:0 4px 14px rgba(255,165,0,0.6),0 2px 6px rgba(0,0,0,0.5),inset 0 -2px 4px rgba(139,101,8,0.7),inset 0 2px 4px rgba(255,237,78,0.9);transform:translateY(0) rotateX(70deg);transform-style:preserve-3d;border:1px solid rgba(255,200,0,0.9)}.coin.flip{animation:coinFlip 1.2s ease-in-out forwards}.coin::before{content:'‚Çø';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:13px;font-weight:900;background:linear-gradient(180deg,#ffed4e,#b8860b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;filter:drop-shadow(0 1px 2px rgba(0,0,0,0.6))}.coin::after{content:'';position:absolute;bottom:-2px;left:12%;right:12%;height:7px;background:radial-gradient(ellipse,rgba(139,101,8,0.95) 0%,rgba(139,101,8,0.7) 50%,transparent 75%);border-radius:50%;filter:blur(2px)}@keyframes coinFlip{0%{transform:translateY(0) rotateX(70deg) rotateY(0deg)}50%{transform:translateY(-8px) rotateX(70deg) rotateY(90deg)}100%{transform:translateY(0) rotateX(70deg) rotateY(180deg)}}.vault-stats{display:grid;grid-template-columns:1fr 1fr;gap:12px}.vault-stat{background:linear-gradient(135deg,rgba(0,30,50,0.5),rgba(0,10,20,0.7));border:1px solid rgba(0,200,255,0.1);border-radius:10px;padding:12px;text-align:center}.vault-stat-value{font-size:18px;font-weight:800;color:var(--neon-1);margin-bottom:4px}.vault-stat-label{font-size:10px;color:#9feaff77;text-transform:uppercase;letter-spacing:0.5px}.numpad-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.92);backdrop-filter:blur(12px);display:none;align-items:center;justify-content:center;z-index:10000;animation:fadeIn 0.3s}.numpad-modal.show{display:flex}.numpad-container{background:linear-gradient(135deg,rgba(0,45,80,0.98),rgba(0,20,40,0.99));border:2px solid rgba(0,224,255,0.5);border-radius:20px;padding:20px;box-shadow:0 20px 60px rgba(0,224,255,0.4),0 0 100px rgba(0,224,255,0.15) inset,0 0 0 1px rgba(0,224,255,0.1) inset;width:auto;max-width:280px;position:relative;overflow:hidden}.numpad-container::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,rgba(0,224,255,0.8),transparent);animation:scanline 2s linear infinite;pointer-events:none}@keyframes numpadScan{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}.numpad-title{font-size:13px;color:var(--neon-1);text-align:center;margin-bottom:6px;font-weight:800;text-transform:uppercase;letter-spacing:1.2px;text-shadow:0 0 10px rgba(0,224,255,0.6)}.numpad-subtitle{font-size:9px;color:#9feaff99;text-align:center;margin-bottom:12px;font-weight:600}.numpad-display{background:linear-gradient(180deg,rgba(0,0,0,0.6),rgba(0,0,0,0.8));border:2px solid rgba(0,224,255,0.4);border-radius:10px;padding:12px;margin-bottom:12px;text-align:center;font-family:'Courier New',monospace;font-size:18px;font-weight:800;color:var(--neon-1);text-shadow:0 0 16px rgba(0,224,255,1),0 0 8px rgba(0,224,255,0.8);min-height:36px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 16px rgba(0,0,0,0.4) inset,0 0 20px rgba(0,224,255,0.1);position:relative}.numpad-display::after{content:'';position:absolute;bottom:0;left:10%;right:10%;height:1px;background:linear-gradient(90deg,transparent,rgba(0,224,255,0.5),transparent)}.numpad-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:12px}.numpad-btn{background:linear-gradient(135deg,rgba(0,224,255,0.25),rgba(0,180,255,0.15));border:2px solid rgba(0,224,255,0.5);border-radius:10px;padding:0;font-size:18px;font-weight:800;color:var(--neon-1);cursor:pointer;transition:all 0.2s;box-shadow:0 4px 16px rgba(0,224,255,0.2),0 0 20px rgba(0,224,255,0.05) inset;aspect-ratio:1;width:60px;height:60px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}.numpad-btn::before{content:'';position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(180deg,rgba(255,255,255,0.1),transparent);pointer-events:none;opacity:0;transition:opacity 0.2s}.numpad-btn:hover{background:linear-gradient(135deg,rgba(0,224,255,0.4),rgba(0,180,255,0.25));box-shadow:0 6px 24px rgba(0,224,255,0.5),0 0 30px rgba(0,224,255,0.2) inset;transform:translateY(-3px);border-color:rgba(0,224,255,0.8)}.numpad-btn:hover::before{opacity:1}.numpad-btn:active{transform:translateY(0);box-shadow:0 2px 8px rgba(0,224,255,0.3),0 0 15px rgba(0,224,255,0.1) inset}.numpad-btn.wide{grid-column:span 2}.numpad-actions{display:flex;gap:8px;margin-top:4px}.numpad-action-btn{flex:1;background:linear-gradient(135deg,rgba(0,224,255,0.3),rgba(0,180,255,0.2));border:2px solid rgba(0,224,255,0.6);border-radius:10px;padding:12px;font-size:11px;font-weight:800;color:var(--neon-1);cursor:pointer;transition:all 0.2s;text-transform:uppercase;letter-spacing:0.8px;box-shadow:0 4px 16px rgba(0,224,255,0.2);position:relative;overflow:hidden}.numpad-action-btn::before{content:'';position:absolute;top:0;left:0;right:0;height:50%;background:linear-gradient(180deg,rgba(255,255,255,0.15),transparent);pointer-events:none}.numpad-action-btn:hover{background:linear-gradient(135deg,rgba(0,224,255,0.5),rgba(0,180,255,0.3));box-shadow:0 6px 24px rgba(0,224,255,0.5);transform:translateY(-2px);border-color:rgba(0,224,255,0.9)}.numpad-action-btn:active{transform:translateY(0)}.numpad-action-btn.cancel{background:linear-gradient(135deg,rgba(255,80,80,0.25),rgba(220,50,50,0.15));border-color:rgba(255,100,100,0.5)}.numpad-action-btn.cancel:hover{background:linear-gradient(135deg,rgba(255,100,100,0.4),rgba(220,60,60,0.25));border-color:rgba(255,120,120,0.7)}.numpad-quick{display:flex;gap:6px;margin-bottom:12px;justify-content:center}.numpad-quick-btn{background:linear-gradient(135deg,rgba(0,200,255,0.2),rgba(0,160,220,0.12));border:1.5px solid rgba(0,200,255,0.4);border-radius:8px;padding:6px 10px;font-size:9px;font-weight:800;color:var(--neon-1);cursor:pointer;transition:all 0.2s;box-shadow:0 2px 8px rgba(0,224,255,0.15);position:relative}.numpad-quick-btn::after{content:'';position:absolute;inset:0;border-radius:8px;background:linear-gradient(135deg,rgba(255,255,255,0.1),transparent);opacity:0;transition:opacity 0.2s;pointer-events:none}.numpad-quick-btn:hover{background:linear-gradient(135deg,rgba(0,224,255,0.35),rgba(0,180,255,0.22));box-shadow:0 4px 16px rgba(0,224,255,0.4);transform:translateY(-2px);border-color:rgba(0,224,255,0.7)}.numpad-quick-btn:hover::after{opacity:1}.numpad-quick-btn:active{transform:translateY(0)}.sp-modal-content{background:linear-gradient(135deg,rgba(0,40,70,0.95),rgba(0,15,30,0.98));border:2px solid rgba(0,224,255,0.3);border-radius:20px;padding:32px 24px;max-width:280px;width:100%;box-shadow:0 20px 60px rgba(0,224,255,0.2),0 0 80px rgba(0,224,255,0.1);text-align:center;position:relative;animation:slideUp 0.4s cubic-bezier(0.34,1.56,0.64,1)}@keyframes slideUp{from{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.sp-modal-icon{width:80px;height:80px;margin:0 auto 20px;display:flex;align-items:center;justify-content:center;animation:starPulse 1.5s ease-in-out infinite}@keyframes starPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}.sp-modal-icon svg{width:80px;height:80px;filter:drop-shadow(0 0 20px rgba(0,224,255,0.8))}.sp-modal-title{font-size:20px;font-weight:800;color:var(--neon-1);margin-bottom:12px;letter-spacing:0.5px;text-shadow:0 0 20px rgba(0,224,255,0.5)}.sp-modal-desc{font-size:13px;color:#9feaff;line-height:1.6;margin-bottom:24px}.sp-modal-reward{display:flex;align-items:center;justify-content:center;gap:8px;background:linear-gradient(135deg,rgba(0,224,255,0.15),rgba(0,180,255,0.08));border:1px solid rgba(0,224,255,0.3);border-radius:12px;padding:12px 20px;margin-bottom:20px}.sp-modal-reward svg{width:24px;height:24px;filter:drop-shadow(0 0 8px rgba(0,224,255,0.6))}.sp-modal-reward span{font-size:18px;font-weight:800;color:var(--neon-1)}.sp-modal-btn{background:linear-gradient(135deg,rgba(0,224,255,0.2),rgba(0,180,255,0.15));border:1px solid rgba(0,224,255,0.4);padding:12px 32px;border-radius:12px;font-weight:800;font-size:14px;color:var(--neon-1);cursor:pointer;transition:all 0.2s;box-shadow:0 4px 16px rgba(0,224,255,0.2);width:100%}.sp-modal-btn:hover{background:linear-gradient(135deg,rgba(0,224,255,0.3),rgba(0,180,255,0.2));box-shadow:0 6px 24px rgba(0,224,255,0.4);transform:translateY(-2px)}.sp-modal-btn:active{transform:translateY(0)}@media(max-width:420px){.phone{width:100vw;height:100vh;max-width:100%;max-height:100%;border-radius:0;overflow:hidden;position:relative;background:#000;box-shadow:none;border:none;}}
/* Missions styles */
.mission {display:flex;align-items:center;justify-content:space-between;padding:6px 8px;border-radius:8px;background:linear-gradient(135deg,rgba(0,30,50,0.6),rgba(0,10,20,0.9));border:1px solid rgba(0,200,255,0.06)}
.mission .meta{flex:1;margin-left:6px;min-width:0}
.mission .title{font-weight:800;color:var(--neon-1);font-size:10px;line-height:1.2}
.mission .desc{font-size:8px;color:#9feaff88;margin-top:2px;line-height:1.2}
.mission .claim{min-width:52px;padding:4px 6px;border-radius:6px;background:linear-gradient(135deg,rgba(0,224,255,0.15),rgba(0,180,255,0.08));border:1px solid rgba(0,224,255,0.25);color:var(--neon-1);font-weight:800;cursor:pointer;font-size:8px;white-space:nowrap}
.mission.locked{opacity:0.45}
.mission.claimed{opacity:0.6;text-decoration:line-through}
.stone-item{display:flex;align-items:center;gap:6px;padding:6px 8px;border-radius:8px;background:linear-gradient(90deg,rgba(0,240,255,0.04),rgba(0,120,180,0.02));border:1px solid rgba(0,220,255,0.08)}
.stone-item .stone-icon{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,rgba(0,180,255,0.2),rgba(0,100,160,0.1));border-radius:6px;font-size:20px;flex-shrink:0;color:var(--neon-1);font-weight:900}
.stone-item .stone-meta{flex:1;min-width:0}
.stone-item .stone-name{font-size:10px;font-weight:700;color:var(--neon-1);line-height:1.2}
.stone-item .stone-desc{font-size:8px;color:#9feaff77;line-height:1.2;margin-top:2px}
.stone-item .stone-buy{padding:4px 8px;border-radius:6px;background:linear-gradient(135deg,rgba(0,224,255,0.2),rgba(0,180,255,0.1));border:1px solid rgba(0,224,255,0.3);color:var(--neon-1);font-weight:700;font-size:8px;cursor:pointer;white-space:nowrap;flex-shrink:0}
.stone-item .stone-buy:disabled{opacity:0.3;cursor:not-allowed}
.rig-menu-btn{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:36px;height:36px;background:linear-gradient(135deg,rgba(0,224,255,0.2),rgba(0,180,255,0.12));border:1px solid rgba(0,224,255,0.3);border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;transition:all 0.2s;flex-shrink:0}
.rig-menu-btn:hover{background:linear-gradient(135deg,rgba(0,224,255,0.35),rgba(0,180,255,0.25));border-color:rgba(0,224,255,0.5);box-shadow:0 0 12px rgba(0,224,255,0.3)}
.rig-menu-btn svg{width:18px;height:18px}
.stone-badge{position:absolute;top:6px;right:6px;background:linear-gradient(135deg,rgba(0,224,255,0.3),rgba(0,180,255,0.2));border:1px solid rgba(0,224,255,0.4);border-radius:4px;padding:2px 4px;font-size:7px;font-weight:800;color:var(--neon-1);z-index:5}
.stone-attach-item{display:flex;align-items:center;gap:8px;padding:8px;border-radius:8px;background:linear-gradient(90deg,rgba(0,240,255,0.04),rgba(0,120,180,0.02));border:1px solid rgba(0,220,255,0.08);margin-bottom:8px;cursor:pointer;transition:all 0.2s}
.stone-attach-item:hover{background:linear-gradient(90deg,rgba(0,240,255,0.08),rgba(0,120,180,0.04));border-color:rgba(0,224,255,0.2)}
.stone-attach-item.attached{opacity:0.5;cursor:not-allowed}
.stone-slots{position:absolute;top:6px;right:6px;display:flex;gap:3px;z-index:5}
.stone-slot{width:12px;height:12px;border-radius:3px;background:rgba(0,0,0,0.4);border:1px solid rgba(0,224,255,0.2);display:flex;align-items:center;justify-content:center;font-size:8px}
.stone-slot.filled{background:linear-gradient(135deg,rgba(0,224,255,0.3),rgba(0,180,255,0.2));border-color:rgba(0,224,255,0.5)}
.modal-stone-slots{display:flex;gap:8px;margin-bottom:16px;justify-content:center}
.modal-stone-slot{width:48px;height:48px;border-radius:8px;background:rgba(0,0,0,0.4);border:2px dashed rgba(0,224,255,0.2);display:flex;align-items:center;justify-content:center;font-size:24px;cursor:pointer;transition:all 0.2s;position:relative}
.modal-stone-slot:hover{border-color:rgba(0,224,255,0.5);background:rgba(0,224,255,0.05)}
.modal-stone-slot.filled{background:linear-gradient(135deg,rgba(0,224,255,0.2),rgba(0,180,255,0.1));border:2px solid rgba(0,224,255,0.4);cursor:default}
.modal-stone-slot.filled:hover{border-color:rgba(0,224,255,0.4)}
.modal-stone-slot.next-empty{border-color:rgba(0,224,255,0.6);box-shadow:0 0 12px rgba(0,224,255,0.3);animation:pulse 1.5s ease-in-out infinite}
@keyframes pulse{0%,100%{border-color:rgba(0,224,255,0.6);box-shadow:0 0 12px rgba(0,224,255,0.3)}50%{border-color:rgba(0,224,255,0.9);box-shadow:0 0 20px rgba(0,224,255,0.6)}}
.stone-list{display:flex;flex-direction:column;gap:8px;max-height:200px;overflow-y:auto}
</style></head><body><div class="phone" aria-label="Phone preview"><canvas id="bg"></canvas><div class="ui"><header><div class="title"><div class="logo" aria-hidden="true"><svg width="26" height="26" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="8" stroke="white" stroke-opacity="0.12" stroke-width="1.2"/><path d="M12 7v10" stroke="white" stroke-width="1.2" stroke-linecap="round"/><path d="M9 9.6h5" stroke="white" stroke-width="1.2" stroke-linecap="round"/><path d="M9 14.4h5" stroke="white" stroke-width="1.2" stroke-linecap="round"/></svg></div><div><h1>NEON BTC MINER</h1><div class="subtitle">Prototype ‚Ä¢ Neon aesthetic ‚Ä¢ Mobile-first</div></div></div><div class="top-row"><div class="balance" title="Current BTC balance"><div class="small">Balance</div><div class="big" id="btcDisplay">‚Çø 0.000</div></div><div class="controls"><button class="btn" id="statsBtn" title="Statistics">Stats</button><button class="btn" id="saveBtn" title="Save">Save</button><button class="btn reset" id="resetBtn" title="Reset">Reset</button></div></div><div class="skill-points-badge" id="spBadge" title="Skill Points"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg><span id="spCount">0</span></div><div class="settings-corner"><div class="settings-btn" id="settingsBtn" title="Settings"><svg viewBox="0 0 24 24" fill="none" stroke="#00e0ff" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M1 12h6m6 0h6"/><path d="m4.22 4.22 4.24 4.24m5.08 5.08 4.24 4.24M4.22 19.78l4.24-4.24m5.08-5.08 4.24-4.24"/></svg></div></div></header><div class="page active" id="homePage"><main class="rigs" id="rigList" aria-live="polite"></main><footer><div class="hint">Tap rig icon for stones ‚Ä¢ Buy/upgrade on right</div><div><small>Autosave every 20s</small></div></footer></div><div class="page" id="skillPage"><div class="skill-tree-container"><div class="skill-tree-wrapper" id="skillTreeWrapper"><div class="motherboard" id="motherboard"></div></div><div class="zoom-controls"><button class="zoom-btn" id="zoomIn" title="Zoom In">+</button><button class="zoom-btn" id="zoomOut" title="Zoom Out">‚àí</button><button class="zoom-btn" id="zoomReset" title="Reset Zoom">‚äô</button></div></div><footer><div class="hint">Unlock skills to boost your mining operation.</div><div><small id="skillPoints">Skill Points: 0</small></div></footer></div><div class="page" id="vaultPage"><div class="vault-container"><div class="vault-display"><div class="vault-title">üîê Secure Vault</div><div class="vault-amount" id="vaultAmount">‚Çø 0.000000</div><div class="vault-label">Stored Bitcoin</div></div><div class="vault-actions"><button class="vault-btn" id="depositBtn">Deposit</button><button class="vault-btn" id="withdrawBtn">Withdraw All</button></div><div class="coin-stack" id="coinStack"><div class="coin-stack-title">Coin Stack</div></div><div class="vault-stats"><div class="vault-stat"><div class="vault-stat-value" id="vaultPercent">0%</div><div class="vault-stat-label">Of Total Earned</div></div><div class="vault-stat"><div class="vault-stat-value" id="vaultCount">0</div><div class="vault-stat-label">Coins Stored</div></div></div></div><footer><div class="hint">Store your BTC safely in the vault.</div><div><small>Vault is secure</small></div></footer></div>
<div class="page" id="stakingPage">
<div class="panel" style="padding:16px;margin-bottom:12px">
<h2 style="margin:0 0 12px;font-size:16px;color:var(--neon-1)">‚Çø Bitcoin Staking</h2>
<p style="margin:0;font-size:11px;color:var(--muted);line-height:1.5">Stake your Bitcoin to earn passive interest. Staked funds accumulate interest every second at 10% APY.</p>
</div>
<div class="panel" style="padding:16px;margin-bottom:12px">
<div style="display:flex;justify-content:space-between;margin-bottom:8px">
<span style="font-size:11px;color:var(--muted)">Available Balance</span>
<span id="availableBalance" style="font-size:13px;font-weight:600;color:#fff">0.00000000 BTC</span>
</div>
<div style="display:flex;justify-content:space-between;margin-bottom:16px">
<span style="font-size:11px;color:var(--muted)">Staked Amount</span>
<span id="stakedAmount" style="font-size:13px;font-weight:600;color:var(--neon-1)">0.00000000 BTC</span>
</div>
<div style="display:flex;justify-content:space-between;margin-bottom:16px;padding:12px;background:rgba(0,224,255,0.05);border-radius:8px;border:1px solid rgba(0,224,255,0.1)">
<span style="font-size:11px;color:var(--muted)">Interest Earned</span>
<span id="interestEarned" style="font-size:14px;font-weight:700;color:var(--accent)">+0.00000000 BTC</span>
</div>
<div style="display:flex;gap:8px">
<button id="stakeBtn" class="btn-primary" style="flex:1;padding:12px;background:linear-gradient(135deg,var(--neon-1),var(--neon-2));border:none;border-radius:8px;color:#000;font-weight:700;font-size:13px;cursor:pointer;box-shadow:0 4px 20px rgba(0,224,255,0.3)">Stake BTC</button>
<button id="unstakeBtn" class="btn-secondary" style="flex:1;padding:12px;background:rgba(255,255,255,0.05);border:1px solid rgba(100,240,255,0.15);border-radius:8px;color:var(--neon-1);font-weight:600;font-size:13px;cursor:pointer">Unstake All</button>
</div>
</div>
<div class="panel" style="padding:16px">
<h3 style="margin:0 0 12px;font-size:13px;color:#fff">Staking Stats</h3>
<div style="display:flex;justify-content:space-between;margin-bottom:8px">
<span style="font-size:11px;color:var(--muted)">Annual Percentage Yield</span>
<span style="font-size:12px;font-weight:600;color:var(--accent)">10.00% APY</span>
</div>
<div style="display:flex;justify-content:space-between;margin-bottom:8px">
<span style="font-size:11px;color:var(--muted)">Daily Interest Rate</span>
<span style="font-size:12px;font-weight:600;color:var(--accent)">~0.027%</span>
</div>
<div style="display:flex;justify-content:space-between">
<span style="font-size:11px;color:var(--muted)">Total Value</span>
<span id="totalStakingValue" style="font-size:12px;font-weight:600;color:#fff">0.00000000 BTC</span>
</div>
</div>
<footer>
<div class="hint">Earn passive income through staking.</div>
<div>
<small>10% APY</small>
</div>
</footer>
</div>
<div class="page" id="morePage">
  <div style="flex:1;display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;gap:8px;padding:0;overflow:hidden;box-sizing:border-box">
    <button style="background:linear-gradient(135deg,rgba(0,30,50,0.8),rgba(0,10,20,0.95));border:1px solid rgba(0,224,255,0.3);border-radius:10px;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;cursor:pointer;transition:all 0.2s;min-height:0;min-width:0" id="openMissionsBtn">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 11l3 3L22 4"></path>
        <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"></path>
      </svg>
      <div style="font-size:14px;color:var(--neon-1);font-weight:800;text-transform:uppercase;letter-spacing:1px">Missions</div>
      <div style="font-size:9px;color:#9feaff77">View & claim rewards</div>
    </button>
    <button style="background:linear-gradient(135deg,rgba(0,30,50,0.8),rgba(0,10,20,0.95));border:1px solid rgba(0,224,255,0.3);border-radius:10px;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;cursor:pointer;transition:all 0.2s;min-height:0;min-width:0" id="openShopBtn">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"></path>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <path d="M16 10a4 4 0 01-8 0"></path>
      </svg>
      <div style="font-size:14px;color:var(--neon-1);font-weight:800;text-transform:uppercase;letter-spacing:1px">Stone Shop</div>
      <div style="font-size:9px;color:#9feaff77">Buy multiplier stones</div>
    </button>
    <button style="background:linear-gradient(135deg,rgba(0,30,50,0.8),rgba(0,10,20,0.95));border:1px solid rgba(0,224,255,0.3);border-radius:10px;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;cursor:pointer;transition:all 0.2s;min-height:0;min-width:0" id="openQuickStatsBtn">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="20" x2="12" y2="10"></line>
        <line x1="18" y1="20" x2="18" y2="4"></line>
        <line x1="6" y1="20" x2="6" y2="16"></line>
      </svg>
      <div style="font-size:14px;color:var(--neon-1);font-weight:800;text-transform:uppercase;letter-spacing:1px">Quick Stats</div>
      <div style="font-size:9px;color:#9feaff77">View summary</div>
    </button>
    <button style="background:linear-gradient(135deg,rgba(0,30,50,0.8),rgba(0,10,20,0.95));border:1px solid rgba(0,224,255,0.3);border-radius:10px;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;opacity:0.5;cursor:not-allowed;min-height:0;min-width:0">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
      </svg>
      <div style="font-size:14px;color:var(--neon-1);font-weight:800;text-transform:uppercase;letter-spacing:1px">Coming Soon</div>
      <div style="font-size:9px;color:#9feaff77">More features</div>
    </button>
  </div>
  <footer><div class="hint">Click any panel to view details</div><div><small>More updates</small></div></footer>
</div>
<div class="stats-modal" id="missionsModal"><div class="stats-content" style="max-width:340px;max-height:520px;display:flex;flex-direction:column"><div class="stats-header"><h2 style="font-size:16px">‚ú® Missions</h2><button class="close-btn" id="closeMissionsModal">‚úï</button></div><div id="missionsList" style="display:flex;flex-direction:column;gap:4px;overflow-y:auto;flex:1;padding-right:2px;margin-bottom:12px"></div><div style="display:flex;gap:6px;padding-top:8px;border-top:1px solid rgba(0,224,255,0.1)"><button id="claimAllBtn" class="btn" style="flex:1;padding:6px 8px;font-size:10px">Claim All</button><button id="refreshMissionsBtn" class="btn" style="flex:1;padding:6px 8px;font-size:10px">Refresh</button></div></div></div>
<div class="stats-modal" id="shopModal"><div class="stats-content" style="max-width:340px;max-height:520px;display:flex;flex-direction:column"><div class="stats-header"><h2 style="font-size:16px">üîÆ Stone Shop</h2><button class="close-btn" id="closeShopModal">‚úï</button></div><div style="font-size:10px;color:#9feaff99;margin-bottom:10px;text-align:center">Attach stones to rigs Lv50+ for bonuses</div><div id="stoneShop" style="display:flex;flex-direction:column;gap:8px;overflow-y:auto;flex:1;padding-right:2px"></div></div></div>
<div class="stats-modal" id="quickStatsModal"><div class="stats-content" style="max-width:300px"><div class="stats-header"><h2 style="font-size:16px">üìä Quick Stats</h2><button class="close-btn" id="closeQuickStatsModal">‚úï</button></div><div style="display:flex;flex-direction:column;gap:8px"><div style="display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(0,224,255,0.08)"><span style="color:#9feaff99;font-size:12px">Total Rigs</span><span style="color:var(--neon-1);font-weight:700;font-size:13px" id="quickStatRigs">0</span></div><div style="display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(0,224,255,0.08)"><span style="color:#9feaff99;font-size:12px">Skill Points</span><span style="color:var(--neon-1);font-weight:700;font-size:13px" id="quickStatSP">0</span></div><div style="display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(0,224,255,0.08)"><span style="color:#9feaff99;font-size:12px">Stones Owned</span><span style="color:var(--neon-1);font-weight:700;font-size:13px" id="quickStatStones">0</span></div><div style="display:flex;justify-content:space-between;padding:8px 0"><span style="color:#9feaff99;font-size:12px">Stones Attached</span><span style="color:var(--neon-1);font-weight:700;font-size:13px" id="quickStatAttached">0</span></div></div></div></div>
<div class="stats-modal" id="stoneModal"><div class="stats-content" style="max-width:300px"><div class="stats-header"><h2 style="font-size:14px">üîÆ Attach Stones</h2><button class="close-btn" id="closeStoneModal">‚úï</button></div><div id="stoneModalContent"></div></div></div>
<div class="numpad-modal" id="numpadModal"><div class="numpad-container"><div class="numpad-title">üí∞ Deposit Amount</div><div class="numpad-subtitle">Available: <span id="numpadAvailable">‚Çø 0.000000</span></div><div class="numpad-display" id="numpadDisplay">0</div><div class="numpad-quick"><button class="numpad-quick-btn" data-percent="25">25%</button><button class="numpad-quick-btn" data-percent="50">50%</button><button class="numpad-quick-btn" data-percent="75">75%</button><button class="numpad-quick-btn" data-percent="100">MAX</button></div><div class="numpad-grid"><button class="numpad-btn" data-num="1">1</button><button class="numpad-btn" data-num="2">2</button><button class="numpad-btn" data-num="3">3</button><button class="numpad-btn" data-num="4">4</button><button class="numpad-btn" data-num="5">5</button><button class="numpad-btn" data-num="6">6</button><button class="numpad-btn" data-num="7">7</button><button class="numpad-btn" data-num="8">8</button><button class="numpad-btn" data-num="9">9</button><button class="numpad-btn" data-num=".">.</button><button class="numpad-btn" data-num="0">0</button><button class="numpad-btn" data-action="backspace">‚å´</button></div><div class="numpad-actions"><button class="numpad-action-btn cancel" id="numpadCancel">Cancel</button><button class="numpad-action-btn" id="numpadConfirm">Deposit</button></div></div></div><nav class="bottom-nav"><button class="nav-btn active" id="navHome"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg><span>Home</span></button><button class="nav-btn" id="navSkills"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/></svg><span>Skills</span></button><button class="nav-btn" id="navVault"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/><circle cx="12" cy="16" r="1"/></svg><span>Vault</span></button><button class="nav-btn" id="navStaking">
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
<path d="M12 2v20M17 7l-5 5-5-5M7 17l5-5 5 5"/>
</svg>
<span>Staking</span>
</button>
<button class="nav-btn" id="navMore">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 5v14M5 12h14"/></svg>
<span>More</span>
</button>
</nav></div><div class="burst" id="burstLayer" aria-hidden="true"></div><div class="skill-point-modal" id="spModal"><div class="sp-modal-content"><div class="sp-modal-icon"><svg viewBox="0 0 24 24" fill="none" stroke="#00e0ff" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg></div><div class="sp-modal-title">SKILL POINT EARNED!</div><div class="sp-modal-desc">You've reached a new milestone! Use skill points to unlock powerful upgrades in the skill tree.</div><div class="sp-modal-reward"><svg viewBox="0 0 24 24" fill="none" stroke="#00e0ff" stroke-width="2.5"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg><span>+1 Skill Point</span></div><button class="sp-modal-btn" id="spModalBtn">Collect Reward</button></div></div><div class="settings-modal" id="settingsModal"><div class="settings-content"><div class="settings-header"><h2>Settings</h2><button class="close-btn" id="closeSettings">‚úï</button></div><div class="settings-option"><div class="settings-label">Sound Effects</div><div class="toggle-switch active" id="sfxToggle"><div class="toggle-slider"></div></div></div></div></div><div class="stats-modal" id="statsModal"><div class="stats-content"><div class="stats-header"><h2>üìä STATISTICS</h2><button class="close-btn" id="closeStats">‚úï</button></div><div class="stat-section"><div class="stat-section-title">Production</div><div class="stat-row"><div class="stat-label">BTC per Second</div><div class="stat-value" id="statBPS">‚Çø 0.000</div></div><div class="stat-row"><div class="stat-label">BTC per Minute</div><div class="stat-value" id="statBPM">‚Çø 0.000</div></div><div class="stat-row"><div class="stat-label">BTC per Hour</div><div class="stat-value" id="statBPH">‚Çø 0.000</div></div></div><div class="stat-section"><div class="stat-section-title">Lifetime Stats</div><div class="stat-row"><div class="stat-label">Total BTC Earned</div><div class="stat-value" id="statTotal">‚Çø 0.000</div></div><div class="stat-row"><div class="stat-label">Total Spent</div><div class="stat-value" id="statSpent">‚Çø 0.000</div></div><div class="stat-row"><div class="stat-label">Total Upgrades</div><div class="stat-value" id="statUpgrades">0</div></div></div><div class="stat-section"><div class="stat-section-title">Game Info</div><div class="stat-row"><div class="stat-label">Time Played</div><div class="stat-value" id="statTime">0m 0s</div></div><div class="stat-row"><div class="stat-label">Rigs Owned</div><div class="stat-value" id="statRigs">0</div></div><div class="stat-row"><div class="stat-label">Highest Level Rig</div><div class="stat-value" id="statMaxLvl">None</div></div></div></div></div></div><script>/*minified prototype*/const c=document.getElementById("bg"),x=c.getContext("2d"),P=document.querySelector(".phone");function rz(){const r=P.getBoundingClientRect(),d=Math.max(1,window.devicePixelRatio||1);c.width=Math.round(r.width*d);c.height=Math.round(r.height*d);c.style.width=r.width+"px";c.style.height=r.height+"px";x.setTransform(d,0,0,d,0,0)}window.addEventListener("resize",rz);rz();const pt=[],M=90;function ip(){pt.length=0;const r=P.getBoundingClientRect();for(let i=0;i<M;i++)pt.push({x:Math.random()*r.width,y:Math.random()*r.height,size:Math.random()*4+1,vy:.2+Math.random()*.8,alpha:.05+Math.random()*.16,hueShift:Math.random()*20-10})}ip();let lf=performance.now();function df(ts){const r=P.getBoundingClientRect(),dt=Math.min(60,ts-lf)/1e3;lf=ts;x.clearRect(0,0,r.width,r.height);const g=x.createLinearGradient(0,0,0,r.height);g.addColorStop(0,"rgba(0,12,20,0.75)");g.addColorStop(1,"rgba(0,0,0,0.9)");x.fillStyle=g;x.fillRect(0,0,r.width,r.height);for(const p of pt){x.fillStyle=`rgba(0,230,255,${p.alpha})`;x.fillRect(p.x,p.y,p.size,p.size);p.y+=p.vy*(0.6+dt*60);if(p.y>r.height+8){p.y=-8;p.x=Math.random()*r.width}}x.save();x.globalAlpha=.06;x.strokeStyle="rgba(0,200,255,0.14)";x.lineWidth=1;const t=ts/1e3;for(let i=0;i<5;i++){x.beginPath();const y=40+i*70+Math.sin(t*.6+i)*8;x.moveTo(12,y);x.bezierCurveTo(r.width*.25,y+10,r.width*.75,y-10,r.width-12,y);x.stroke()}x.restore();x.save();x.globalCompositeOperation="lighter";x.globalAlpha=.02;x.fillStyle="rgba(0,200,255,0.4)";x.beginPath();x.ellipse(r.width*.5,r.height*.35,r.width*.55,r.height*.18,0,0,Math.PI*2);x.fill();x.restore();requestAnimationFrame(df)}requestAnimationFrame(df);const BASE_RIGS=[{id:"basic",title:"Basic Miner",baseRate:.0004,baseCost:0,desc:"Starter rig ‚Äî free",iconColor:"#66f0ff",cycleTime:2},{id:"gpu",title:"GPU Rack",baseRate:.002,baseCost:.005,desc:"Small GPU cluster",iconColor:"#3cf0b6",cycleTime:4},{id:"quantum",title:"Quantum Rig",baseRate:.01,baseCost:.04,desc:"High power miner",iconColor:"#7aa6ff",cycleTime:8},{id:"ai",title:"AI Core",baseRate:.06,baseCost:.22,desc:"AI-optimized hashing",iconColor:"#9b7aff",cycleTime:16},{id:"sing",title:"Singularity Unit",baseRate:.35,baseCost:1.2,desc:"Top-tier hash engine",iconColor:"#ffd86b",cycleTime:32},{id:"fusion",title:"Fusion Reactor",baseRate:2.1,baseCost:6.5,desc:"Nuclear-powered mining",iconColor:"#ff6b9d",cycleTime:64},{id:"stellar",title:"Stellar Array",baseRate:12.5,baseCost:35,desc:"Star-powered network",iconColor:"#ffb347",cycleTime:128},{id:"nebula",title:"Nebula Cluster",baseRate:75,baseCost:180,desc:"Cosmic mining station",iconColor:"#b19cd9",cycleTime:256},{id:"galactic",title:"Galactic Grid",baseRate:450,baseCost:950,desc:"Galaxy-scale operation",iconColor:"#77dd77",cycleTime:512},{id:"dimensional",title:"Dimensional Rig",baseRate:2700,baseCost:5000,desc:"Cross-dimensional mining",iconColor:"#ff6ec7",cycleTime:1024},{id:"temporal",title:"Temporal Engine",baseRate:16200,baseCost:26000,desc:"Time-warped hashing",iconColor:"#87ceeb",cycleTime:2048},{id:"cosmic",title:"Cosmic Nexus",baseRate:97200,baseCost:135000,desc:"Universe-spanning network",iconColor:"#ffd700",cycleTime:4096},{id:"infinity",title:"Infinity Core",baseRate:583200,baseCost:700000,desc:"Infinite hash potential",iconColor:"#ff1493",cycleTime:8192},{id:"omega",title:"Omega Matrix",baseRate:3499200,baseCost:3600000,desc:"Ultimate mining matrix",iconColor:"#00ffff",cycleTime:16384},{id:"transcendent",title:"Transcendent Rig",baseRate:20995200,baseCost:18500000,desc:"Beyond comprehension",iconColor:"#ff00ff",cycleTime:32768},{id:"ethereal",title:"Ethereal Forge",baseRate:125971200,baseCost:95000000,desc:"Forged from pure energy",iconColor:"#9d7fff",cycleTime:65536},{id:"void",title:"Void Harvester",baseRate:755827200,baseCost:490000000,desc:"Mines the void itself",iconColor:"#4b0082",cycleTime:131072},{id:"celestial",title:"Celestial Engine",baseRate:4534963200,baseCost:2500000000,desc:"Powered by stars",iconColor:"#ffa07a",cycleTime:262144},{id:"primordial",title:"Primordial Core",baseRate:27209779200,baseCost:13000000000,desc:"Ancient cosmic power",iconColor:"#20b2aa",cycleTime:524288},{id:"astral",title:"Astral Nexus",baseRate:163258675200,baseCost:67000000000,desc:"Astral plane mining",iconColor:"#da70d6",cycleTime:1048576},{id:"quantum2",title:"Quantum Singularity",baseRate:979552051200,baseCost:345000000000,desc:"Quantum entanglement",iconColor:"#00ced1",cycleTime:2097152},{id:"hyperdimensional",title:"Hyperdimensional Array",baseRate:5877312307200,baseCost:1780000000000,desc:"Beyond 3D space",iconColor:"#ff69b4",cycleTime:4194304},{id:"reality",title:"Reality Bender",baseRate:35263873843200,baseCost:9200000000000,desc:"Bends reality itself",iconColor:"#adff2f",cycleTime:8388608},{id:"multiverse",title:"Multiverse Miner",baseRate:211583243059200,baseCost:47500000000000,desc:"Mines across universes",iconColor:"#ff6347",cycleTime:16777216},{id:"absolute",title:"Absolute Zero",baseRate:1269499458355200,baseCost:245000000000000,desc:"The ultimate rig",iconColor:"#00ffff",cycleTime:33554432}];const SKILLS=[{id:0,name:"Core",cost:1,effect:"speed",value:1.1,color:"#00e0ff",x:0,y:0},{id:1,name:"CPU",cost:5,effect:"speed",value:1.15,color:"#66f0ff",x:-120,y:-80},{id:2,name:"GPU",cost:5,effect:"speed",value:1.15,color:"#3cf0b6",x:120,y:-80},{id:3,name:"RAM",cost:5,effect:"cost",value:0.95,color:"#7aa6ff",x:-120,y:80},{id:4,name:"Cache",cost:5,effect:"cost",value:0.95,color:"#9b7aff",x:120,y:80},{id:5,name:"OC",cost:15,effect:"speed",value:1.2,color:"#00e0ff",x:-240,y:-160},{id:6,name:"Turbo",cost:15,effect:"speed",value:1.2,color:"#5feaff",x:0,y:-160},{id:7,name:"Cooling",cost:15,effect:"speed",value:1.15,color:"#3cf0b6",x:240,y:-160},{id:8,name:"Voltage",cost:15,effect:"cost",value:0.9,color:"#7aa6ff",x:-240,y:0},{id:9,name:"Power",cost:15,effect:"cost",value:0.9,color:"#9b7aff",x:240,y:0},{id:10,name:"Thermal",cost:15,effect:"speed",value:1.15,color:"#00d4ff",x:-240,y:160},{id:11,name:"Chipset",cost:15,effect:"cost",value:0.92,color:"#66f0ff",x:0,y:160},{id:12,name:"BIOS",cost:15,effect:"cost",value:0.92,color:"#3cf0b6",x:240,y:160},{id:13,name:"Neural",cost:50,effect:"speed",value:1.3,color:"#00e0ff",x:-360,y:-240},{id:14,name:"Quantum",cost:50,effect:"speed",value:1.3,color:"#5feaff",x:-120,y:-240},{id:15,name:"Photonic",cost:50,effect:"speed",value:1.25,color:"#3cf0b6",x:120,y:-240},{id:16,name:"Plasma",cost:50,effect:"cost",value:0.85,color:"#7aa6ff",x:360,y:-240},{id:17,name:"Fusion",cost:50,effect:"cost",value:0.85,color:"#9b7aff",x:-360,y:240},{id:18,name:"Antimatter",cost:50,effect:"speed",value:1.25,color:"#00d4ff",x:-120,y:240},{id:19,name:"Atomic",cost:50,effect:"speed",value:1.25,color:"#66f0ff",x:120,y:240},{id:20,name:"Void",cost:50,effect:"cost",value:0.85,color:"#3cf0b6",x:360,y:240},{id:21,name:"Singularity",cost:150,effect:"speed",value:1.5,color:"#00e0ff",x:-360,y:-360},{id:22,name:"Infinity",cost:150,effect:"speed",value:1.5,color:"#66f0ff",x:0,y:-360},{id:23,name:"Eternity",cost:150,effect:"cost",value:0.75,color:"#3cf0b6",x:360,y:-360},{id:24,name:"Omega",cost:150,effect:"speed",value:2,color:"#9b7aff",x:0,y:360},{id:25,name:"Matrix",cost:200,effect:"speed",value:1.4,color:"#ff6ec7",x:-480,y:-320},{id:26,name:"Nexus",cost:200,effect:"cost",value:0.8,color:"#ffd86b",x:480,y:-320},{id:27,name:"Prism",cost:200,effect:"speed",value:1.35,color:"#7af0ff",x:-480,y:0},{id:28,name:"Crystal",cost:200,effect:"cost",value:0.82,color:"#ff9d7a",x:480,y:0},{id:29,name:"Flux",cost:200,effect:"speed",value:1.3,color:"#b19cd9",x:-480,y:320},{id:30,name:"Vortex",cost:200,effect:"cost",value:0.8,color:"#77dd77",x:480,y:320},{id:31,name:"Hyper",cost:300,effect:"speed",value:1.6,color:"#00e0ff",x:-240,y:-480},{id:32,name:"Ultra",cost:300,effect:"speed",value:1.6,color:"#66f0ff",x:0,y:-480},{id:33,name:"Mega",cost:300,effect:"speed",value:1.5,color:"#3cf0b6",x:240,y:-480},{id:34,name:"Giga",cost:300,effect:"cost",value:0.7,color:"#7aa6ff",x:-240,y:480},{id:35,name:"Tera",cost:300,effect:"cost",value:0.7,color:"#9b7aff",x:0,y:480},{id:36,name:"Peta",cost:300,effect:"cost",value:0.75,color:"#ffd86b",x:240,y:480},{id:37,name:"Apex",cost:400,effect:"speed",value:1.8,color:"#ff6ec7",x:-360,y:-480},{id:38,name:"Zenith",cost:400,effect:"speed",value:1.8,color:"#00ced1",x:360,y:-480},{id:39,name:"Nadir",cost:400,effect:"cost",value:0.65,color:"#da70d6",x:-360,y:480},{id:40,name:"Vertex",cost:400,effect:"cost",value:0.65,color:"#adff2f",x:360,y:480},{id:41,name:"Prime",cost:500,effect:"speed",value:2.0,color:"#00e0ff",x:-480,y:-480},{id:42,name:"Alpha",cost:500,effect:"speed",value:2.0,color:"#ff1493",x:480,y:-480},{id:43,name:"Beta",cost:500,effect:"cost",value:0.6,color:"#ffd700",x:-480,y:480},{id:44,name:"Gamma",cost:500,effect:"cost",value:0.6,color:"#ff6347",x:480,y:480},{id:45,name:"Delta",cost:600,effect:"speed",value:2.2,color:"#00ffff",x:-600,y:-360},{id:46,name:"Epsilon",cost:600,effect:"speed",value:2.2,color:"#ff00ff",x:600,y:-360},{id:47,name:"Zeta",cost:600,effect:"cost",value:0.55,color:"#87ceeb",x:-600,y:0},{id:48,name:"Theta",cost:600,effect:"cost",value:0.55,color:"#ffa07a",x:600,y:0},{id:49,name:"Sigma",cost:1000,effect:"speed",value:3.0,color:"#ffffff",x:0,y:-600}];const SAVE_KEY="neon_btc_prototype_v1";let sfxEnabled=true;const audioCtx=new(window.AudioContext||window.webkitAudioContext)();function playSound(type){if(!audioCtx||!sfxEnabled)return;const now=audioCtx.currentTime;const masterGain=audioCtx.createGain();masterGain.connect(audioCtx.destination);const convolver=audioCtx.createConvolver();const impulseLength=audioCtx.sampleRate*0.5;const impulse=audioCtx.createBuffer(2,impulseLength,audioCtx.sampleRate);for(let channel=0;channel<2;channel++){const channelData=impulse.getChannelData(channel);for(let i=0;i<impulseLength;i++){channelData[i]=(Math.random()*2-1)*Math.pow(1-i/impulseLength,2)}}convolver.buffer=impulse;if(type==="click"){const osc=audioCtx.createOscillator();const gain=audioCtx.createGain();const filter=audioCtx.createBiquadFilter();osc.connect(filter);filter.connect(gain);gain.connect(masterGain);osc.type="sine";osc.frequency.setValueAtTime(1200,now);osc.frequency.exponentialRampToValueAtTime(800,now+0.03);gain.gain.setValueAtTime(0.2,now);gain.gain.exponentialRampToValueAtTime(0.001,now+0.06);filter.type="lowpass";filter.frequency.setValueAtTime(3000,now);filter.frequency.exponentialRampToValueAtTime(1000,now+0.06);osc.start(now);osc.stop(now+0.06);const noise=audioCtx.createBufferSource();const noiseBuffer=audioCtx.createBuffer(1,audioCtx.sampleRate*0.02,audioCtx.sampleRate);const noiseData=noiseBuffer.getChannelData(0);for(let i=0;i<noiseData.length;i++){noiseData[i]=Math.random()*2-1}noise.buffer=noiseBuffer;const noiseGain=audioCtx.createGain();const noiseFilter=audioCtx.createBiquadFilter();noise.connect(noiseFilter);noiseFilter.connect(noiseGain);noiseGain.connect(masterGain);noiseFilter.type="highpass";noiseFilter.frequency.setValueAtTime(2000,now);noiseGain.gain.setValueAtTime(0.05,now);noiseGain.gain.exponentialRampToValueAtTime(0.001,now+0.02);noise.start(now);masterGain.gain.setValueAtTime(0.3,now)}else if(type==="buy"){const bass=audioCtx.createOscillator();const bassGain=audioCtx.createGain();const bassFilter=audioCtx.createBiquadFilter();bass.connect(bassFilter);bassFilter.connect(bassGain);bassGain.connect(masterGain);bass.type="sine";bass.frequency.setValueAtTime(80,now);bass.frequency.exponentialRampToValueAtTime(60,now+0.15);bassGain.gain.setValueAtTime(0.3,now);bassGain.gain.exponentialRampToValueAtTime(0.001,now+0.15);bassFilter.type="lowpass";bassFilter.frequency.setValueAtTime(200,now);bass.start(now);bass.stop(now+0.15);const lead=audioCtx.createOscillator();const leadGain=audioCtx.createGain();const leadFilter=audioCtx.createBiquadFilter();lead.connect(leadFilter);leadFilter.connect(leadGain);leadGain.connect(convolver);convolver.connect(masterGain);lead.type="triangle";lead.frequency.setValueAtTime(523.25,now);lead.frequency.setValueAtTime(659.25,now+0.08);lead.frequency.setValueAtTime(783.99,now+0.16);leadGain.gain.setValueAtTime(0.15,now);leadGain.gain.setValueAtTime(0.15,now+0.08);leadGain.gain.setValueAtTime(0.15,now+0.16);leadGain.gain.exponentialRampToValueAtTime(0.001,now+0.35);leadFilter.type="bandpass";leadFilter.frequency.setValueAtTime(2000,now);leadFilter.Q.setValueAtTime(1,now);lead.start(now);lead.stop(now+0.35);const perc=audioCtx.createOscillator();const percGain=audioCtx.createGain();perc.connect(percGain);percGain.connect(masterGain);perc.type="sine";perc.frequency.setValueAtTime(800,now);perc.frequency.exponentialRampToValueAtTime(100,now+0.05);percGain.gain.setValueAtTime(0.2,now);percGain.gain.exponentialRampToValueAtTime(0.001,now+0.05);perc.start(now);perc.stop(now+0.05);masterGain.gain.setValueAtTime(0.4,now)}else if(type==="unlock"){const chord=[523.25,659.25,783.99];chord.forEach((freq,i)=>{const osc=audioCtx.createOscillator();const gain=audioCtx.createGain();const filter=audioCtx.createBiquadFilter();osc.connect(filter);filter.connect(gain);gain.connect(convolver);convolver.connect(masterGain);osc.type="sawtooth";osc.frequency.setValueAtTime(freq,now);osc.frequency.exponentialRampToValueAtTime(freq*1.5,now+0.4);gain.gain.setValueAtTime(0,now+i*0.03);gain.gain.linearRampToValueAtTime(0.08,now+i*0.03+0.02);gain.gain.exponentialRampToValueAtTime(0.001,now+0.5);filter.type="lowpass";filter.frequency.setValueAtTime(500,now);filter.frequency.exponentialRampToValueAtTime(4000,now+0.3);filter.Q.setValueAtTime(1,now);osc.start(now+i*0.03);osc.stop(now+0.5)});const sparkle=audioCtx.createOscillator();const sparkleGain=audioCtx.createGain();sparkle.connect(sparkleGain);sparkleGain.connect(masterGain);sparkle.type="sine";sparkle.frequency.setValueAtTime(2400,now+0.1);sparkle.frequency.exponentialRampToValueAtTime(3600,now+0.3);sparkleGain.gain.setValueAtTime(0.1,now+0.1);sparkleGain.gain.exponentialRampToValueAtTime(0.001,now+0.4);sparkle.start(now+0.1);sparkle.stop(now+0.4);masterGain.gain.setValueAtTime(0.5,now)}else if(type==="nav"){const osc1=audioCtx.createOscillator();const osc2=audioCtx.createOscillator();const gain=audioCtx.createGain();const filter=audioCtx.createBiquadFilter();osc1.connect(filter);osc2.connect(filter);filter.connect(gain);gain.connect(masterGain);osc1.type="sine";osc2.type="sine";osc1.frequency.setValueAtTime(880,now);osc2.frequency.setValueAtTime(1320,now);gain.gain.setValueAtTime(0.15,now);gain.gain.exponentialRampToValueAtTime(0.001,now+0.08);filter.type="lowpass";filter.frequency.setValueAtTime(2500,now);filter.frequency.exponentialRampToValueAtTime(1000,now+0.08);osc1.start(now);osc2.start(now);osc1.stop(now+0.08);osc2.stop(now+0.08);masterGain.gain.setValueAtTime(0.3,now)}else if(type==="error"){const osc=audioCtx.createOscillator();const gain=audioCtx.createGain();const filter=audioCtx.createBiquadFilter();osc.connect(filter);filter.connect(gain);gain.connect(masterGain);osc.type="sawtooth";osc.frequency.setValueAtTime(180,now);osc.frequency.linearRampToValueAtTime(160,now+0.1);osc.frequency.linearRampToValueAtTime(180,now+0.2);gain.gain.setValueAtTime(0.2,now);gain.gain.exponentialRampToValueAtTime(0.001,now+0.25);filter.type="lowpass";filter.frequency.setValueAtTime(600,now);osc.start(now);osc.stop(now+0.25);const noise=audioCtx.createBufferSource();const noiseBuffer=audioCtx.createBuffer(1,audioCtx.sampleRate*0.1,audioCtx.sampleRate);const noiseData=noiseBuffer.getChannelData(0);for(let i=0;i<noiseData.length;i++){noiseData[i]=(Math.random()*2-1)*0.3}noise.buffer=noiseBuffer;const noiseGain=audioCtx.createGain();const noiseFilter=audioCtx.createBiquadFilter();noise.connect(noiseFilter);noiseFilter.connect(noiseGain);noiseGain.connect(masterGain);noiseFilter.type="bandpass";noiseFilter.frequency.setValueAtTime(400,now);noiseFilter.Q.setValueAtTime(2,now);noiseGain.gain.setValueAtTime(0.15,now);noiseGain.gain.exponentialRampToValueAtTime(0.001,now+0.15);noise.start(now);masterGain.gain.setValueAtTime(0.35,now)}else if(type==="deposit"){const notes=[523.25,659.25,783.99,1046.5];notes.forEach((freq,i)=>{const osc=audioCtx.createOscillator();const gain=audioCtx.createGain();const filter=audioCtx.createBiquadFilter();osc.connect(filter);filter.connect(gain);gain.connect(convolver);convolver.connect(masterGain);osc.type="sine";osc.frequency.setValueAtTime(freq,now+i*0.06);gain.gain.setValueAtTime(0.12,now+i*0.06);gain.gain.exponentialRampToValueAtTime(0.001,now+i*0.06+0.25);filter.type="lowpass";filter.frequency.setValueAtTime(freq*3,now+i*0.06);filter.Q.setValueAtTime(1,now);osc.start(now+i*0.06);osc.stop(now+i*0.06+0.25);const harm=audioCtx.createOscillator();const harmGain=audioCtx.createGain();harm.connect(harmGain);harmGain.connect(masterGain);harm.type="sine";harm.frequency.setValueAtTime(freq*2,now+i*0.06);harmGain.gain.setValueAtTime(0.04,now+i*0.06);harmGain.gain.exponentialRampToValueAtTime(0.001,now+i*0.06+0.2);harm.start(now+i*0.06);harm.stop(now+i*0.06+0.2)});masterGain.gain.setValueAtTime(0.4,now)}else if(type==="skillpoint"){const melody=[783.99,987.77,1174.66,1318.51,1567.98];melody.forEach((freq,i)=>{const osc=audioCtx.createOscillator();const gain=audioCtx.createGain();const filter=audioCtx.createBiquadFilter();osc.connect(filter);filter.connect(gain);gain.connect(convolver);convolver.connect(masterGain);osc.type="triangle";osc.frequency.setValueAtTime(freq,now+i*0.08);osc.frequency.exponentialRampToValueAtTime(freq*1.02,now+i*0.08+0.15);gain.gain.setValueAtTime(0.15,now+i*0.08);gain.gain.exponentialRampToValueAtTime(0.001,now+i*0.08+0.3);filter.type="lowpass";filter.frequency.setValueAtTime(freq*4,now+i*0.08);filter.Q.setValueAtTime(1,now);osc.start(now+i*0.08);osc.stop(now+i*0.08+0.3);const shimmer=audioCtx.createOscillator();const shimmerGain=audioCtx.createGain();shimmer.connect(shimmerGain);shimmerGain.connect(masterGain);shimmer.type="sine";shimmer.frequency.setValueAtTime(freq*3,now+i*0.08);shimmerGain.gain.setValueAtTime(0.05,now+i*0.08);shimmerGain.gain.exponentialRampToValueAtTime(0.001,now+i*0.08+0.25);shimmer.start(now+i*0.08);shimmer.stop(now+i*0.08+0.25)});masterGain.gain.setValueAtTime(0.45,now)}else if(type==="numpad"){const osc=audioCtx.createOscillator();const gain=audioCtx.createGain();const filter=audioCtx.createBiquadFilter();osc.connect(filter);filter.connect(gain);gain.connect(masterGain);osc.type="sine";osc.frequency.setValueAtTime(1047,now);osc.frequency.exponentialRampToValueAtTime(880,now+0.04);gain.gain.setValueAtTime(0.15,now);gain.gain.exponentialRampToValueAtTime(0.001,now+0.05);filter.type="lowpass";filter.frequency.setValueAtTime(2500,now);osc.start(now);osc.stop(now+0.05);const click=audioCtx.createOscillator();const clickGain=audioCtx.createGain();click.connect(clickGain);clickGain.connect(masterGain);click.type="square";click.frequency.setValueAtTime(150,now);clickGain.gain.setValueAtTime(0.08,now);clickGain.gain.exponentialRampToValueAtTime(0.001,now+0.01);click.start(now);click.stop(now+0.01);masterGain.gain.setValueAtTime(0.3,now)}}const STONES=[{id:"profit1",name:"Profit Stone",type:"profit",multiplier:1.5,cost:0.05,icon:"‚óè"},{id:"speed1",name:"Speed Stone",type:"speed",multiplier:1.5,cost:0.05,icon:"‚ñ†"}];let game={btc:0,vault:0,rigs:[],skills:[],skillPoints:0,totalLevels:0,lastSave:null,lastTick:performance.now(),stats:{totalEarned:0,totalSpent:0,totalUpgrades:0,startTime:Date.now(),playTime:0},stones:[],rigStones:{}};function ig(){game.rigs=BASE_RIGS.map((r,idx)=>({id:r.id,title:r.title,baseRate:r.baseRate,baseCost:r.baseCost,desc:r.desc,iconColor:r.iconColor,cycleTime:r.cycleTime,level:0,progress:0,unlocked:idx===0}));game.stones=[];game.rigStones={}}ig();let currentStoneRigId=null;const G=1.75;function cst(r,l){if(r.baseCost<=0)return 0;const mult=getSkillMultiplier();return r.baseCost*Math.pow(G,l-1)*mult.cost}const rigListEl=document.getElementById("rigList"),btcDisplay=document.getElementById("btcDisplay"),burstLayer=document.getElementById("burstLayer"),saveBtn=document.getElementById("saveBtn"),resetBtn=document.getElementById("resetBtn"),statsBtn=document.getElementById("statsBtn"),statsModal=document.getElementById("statsModal"),closeStats=document.getElementById("closeStats"),navHome=document.getElementById("navHome"),navSkills=document.getElementById("navSkills"),navVault=document.getElementById("navVault"),navStaking=document.getElementById("navStaking"),homePage=document.getElementById("homePage"),skillPage=document.getElementById("skillPage"),vaultPage=document.getElementById("vaultPage"),stakingPage=document.getElementById("stakingPage"),motherboard=document.getElementById("motherboard"),navMore=document.getElementById("navMore"),morePage=document.getElementById("morePage"),skillPointsEl=document.getElementById("skillPoints"),spBadge=document.getElementById("spBadge"),spCount=document.getElementById("spCount"),skillTreeWrapper=document.getElementById("skillTreeWrapper"),zoomIn=document.getElementById("zoomIn"),zoomOut=document.getElementById("zoomOut"),zoomReset=document.getElementById("zoomReset"),spModal=document.getElementById("spModal"),spModalBtn=document.getElementById("spModalBtn"),vaultAmount=document.getElementById("vaultAmount"),depositBtn=document.getElementById("depositBtn"),withdrawBtn=document.getElementById("withdrawBtn"),coinStack=document.getElementById("coinStack"),vaultPercent=document.getElementById("vaultPercent"),vaultCount=document.getElementById("vaultCount"),numpadModal=document.getElementById("numpadModal"),numpadDisplay=document.getElementById("numpadDisplay"),numpadAvailable=document.getElementById("numpadAvailable"),numpadConfirm=document.getElementById("numpadConfirm"),numpadCancel=document.getElementById("numpadCancel");let zoomLevel=1;let pendingSkillPointSource=null;let numpadValue="";saveBtn.addEventListener("click",()=>{playSound("click");sv();fl("Saved")});resetBtn.addEventListener("click",()=>{if(confirm("Reset prototype and clear save?")){playSound("click");localStorage.removeItem(SAVE_KEY);ig();game.btc=0;game.vault=0;game.skillPoints=0;game.totalLevels=0;game.skills=[];game.stats={totalEarned:0,totalSpent:0,totalUpgrades:0,startTime:Date.now(),playTime:0};missions.forEach(m=>{m.claimed=false});rUI();renderSkillTree();updateSkillPoints();updateVaultDisplay();fl("Reset")}});settingsBtn.addEventListener("click",()=>{playSound("click");settingsModal.classList.add("show")});closeSettings.addEventListener("click",()=>{playSound("click");settingsModal.classList.remove("show")});settingsModal.addEventListener("click",(e)=>{if(e.target===settingsModal){playSound("click");settingsModal.classList.remove("show")}});sfxToggle.addEventListener("click",()=>{sfxEnabled=!sfxEnabled;sfxToggle.classList.toggle("active");if(sfxEnabled){playSound("click")}});statsBtn.addEventListener("click",()=>{playSound("click");updateStats();statsModal.classList.add("show")});closeStats.addEventListener("click",()=>{playSound("click");statsModal.classList.remove("show")});statsModal.addEventListener("click",(e)=>{if(e.target===statsModal){playSound("click");statsModal.classList.remove("show")}});navHome.addEventListener("click",()=>{playSound("nav");homePage.classList.add("active");skillPage.classList.remove("active");vaultPage.classList.remove("active");stakingPage.classList.remove("active");morePage.classList.remove("active");navHome.classList.add("active");navSkills.classList.remove("active");navVault.classList.remove("active");navStaking.classList.remove("active");navMore.classList.remove("active")});navSkills.addEventListener("click",()=>{playSound("nav");skillPage.classList.add("active");homePage.classList.remove("active");vaultPage.classList.remove("active");stakingPage.classList.remove("active");morePage.classList.remove("active");navSkills.classList.add("active");navHome.classList.remove("active");navVault.classList.remove("active");navStaking.classList.remove("active");navMore.classList.remove("active");renderSkillTree();centerSkillTree()});navVault.addEventListener("click",()=>{playSound("nav");vaultPage.classList.add("active");homePage.classList.remove("active");skillPage.classList.remove("active");stakingPage.classList.remove("active");morePage.classList.remove("active");navVault.classList.add("active");navHome.classList.remove("active");navSkills.classList.remove("active");navStaking.classList.remove("active");navMore.classList.remove("active");updateVaultDisplay()});navStaking.addEventListener("click",()=>{playSound("nav");stakingPage.classList.add("active");homePage.classList.remove("active");skillPage.classList.remove("active");vaultPage.classList.remove("active");morePage.classList.remove("active");navStaking.classList.add("active");navHome.classList.remove("active");navSkills.classList.remove("active");navVault.classList.remove("active");navMore.classList.remove("active");updateStakingUI();initStakingHandlers()});
navMore.addEventListener("click",()=>{
  playSound("nav");
  morePage.classList.add("active");
  homePage.classList.remove("active");
  skillPage.classList.remove("active");
  vaultPage.classList.remove("active");
  stakingPage.classList.remove("active");
  navMore.classList.add("active");
  navHome.classList.remove("active");
  navSkills.classList.remove("active");
  navVault.classList.remove("active");
  navStaking.classList.remove("active");
  renderMissions();
  renderStoneShop();
  updateQuickStats();
});
depositBtn.addEventListener("click",()=>{if(game.btc<=0){playSound("error");fl("No BTC to deposit");return}if(game.vault>=39){playSound("error");fl("Vault is full! (39 BTC max)");return}playSound("click");numpadValue="";numpadDisplay.textContent="0";numpadAvailable.textContent="‚Çø "+game.btc.toFixed(6);numpadModal.classList.add("show")});withdrawBtn.addEventListener("click",()=>{if(game.vault<=0){playSound("error");fl("Vault is empty");return}playSound("deposit");game.btc+=game.vault;game.vault=0;rUI();updateVaultDisplay();burst(withdrawBtn);fl("Withdrawn from vault!")});document.querySelectorAll(".numpad-btn").forEach(btn=>{btn.addEventListener("click",()=>{playSound("numpad");const num=btn.dataset.num;const action=btn.dataset.action;if(action==="backspace"){numpadValue=numpadValue.slice(0,-1);numpadDisplay.textContent=numpadValue||"0"}else if(num){if(num==="."&&numpadValue.includes("."))return;if(numpadValue==="0"&&num!==".")numpadValue="";numpadValue+=num;numpadDisplay.textContent=numpadValue}})});document.querySelectorAll(".numpad-quick-btn").forEach(btn=>{btn.addEventListener("click",()=>{playSound("click");const percent=parseInt(btn.dataset.percent);let amount=game.btc*percent/100;const maxDeposit=Math.max(0,39-game.vault);amount=Math.min(amount,maxDeposit);numpadValue=amount.toFixed(6);numpadDisplay.textContent=numpadValue})});numpadConfirm.addEventListener("click",()=>{let amount=parseFloat(numpadValue)||0;if(amount<=0){playSound("error");fl("Enter an amount");return}if(amount>game.btc+0.000001){playSound("error");fl("Not enough BTC");return}const maxDeposit=Math.max(0,39-game.vault);if(amount>maxDeposit+0.000001){amount=maxDeposit;if(amount<=0){playSound("error");fl("Vault is full! (39 BTC max)");return}}playSound("deposit");amount=Math.min(amount,game.btc);game.vault+=amount;game.btc-=amount;rUI();updateVaultDisplay();numpadModal.classList.remove("show");burst(numpadConfirm);fl(`Deposited ‚Çø${amount.toFixed(6)}!`)});numpadCancel.addEventListener("click",()=>{playSound("click");numpadModal.classList.remove("show")});spModalBtn.addEventListener("click",()=>{playSound("skillpoint");const modalIcon=spModal.querySelector(".sp-modal-icon svg");const iconRect=modalIcon.getBoundingClientRect();const phoneRect=P.getBoundingClientRect();const startX=iconRect.left+iconRect.width/2-phoneRect.left;const startY=iconRect.top+iconRect.height/2-phoneRect.top;const particle=document.createElement("div");particle.className="sp-particle";particle.innerHTML=`<svg viewBox="0 0 24 24" fill="none" stroke="#00e0ff" stroke-width="2.5"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>`;particle.style.position="absolute";particle.style.left=startX+"px";particle.style.top=startY+"px";particle.style.width="80px";particle.style.height="80px";particle.style.transform="translate(-50%, -50%)";particle.style.filter="drop-shadow(0 0 20px #00e0ff)";particle.style.transition="none";particle.style.zIndex="9999";burstLayer.appendChild(particle);spModal.classList.remove("show");setTimeout(()=>{animateSkillPointParticle(particle);pendingSkillPointSource=null},50)});zoomIn.addEventListener("click",()=>{playSound("click");zoomLevel=Math.min(2.5,zoomLevel+0.25);applyZoom()});zoomOut.addEventListener("click",()=>{playSound("click");zoomLevel=Math.max(0.25,zoomLevel-0.25);applyZoom()});zoomReset.addEventListener("click",()=>{playSound("click");zoomLevel=1;applyZoom();centerSkillTree()});function centerSkillTree(){if(motherboard){motherboard.style.left="50%";motherboard.style.top="50%";motherboard.style.transform=`translate(-50%, -50%) scale(${zoomLevel})`}}function applyZoom(){if(motherboard){const currentLeft=motherboard.style.left||"50%";const currentTop=motherboard.style.top||"50%";motherboard.style.transform=`translate(-50%, -50%) scale(${zoomLevel})`;if(zoomLevel>1){skillTreeWrapper.classList.add("zoomed")}else{skillTreeWrapper.classList.remove("zoomed")}}}function rUI(){btcDisplay.textContent="‚Çø "+game.btc.toFixed(6);rigListEl.innerHTML="";game.rigs.forEach((r,idx)=>{const row=document.createElement("div");row.className="rig"+(r.unlocked?"":" locked");const icon=document.createElement("div");icon.className="icon";icon.style.background=`linear-gradient(135deg, ${r.iconColor}22, ${r.iconColor}11)`;icon.style.position="relative";const menuBtn=document.createElement("button");menuBtn.className="rig-menu-btn";menuBtn.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="4" y1="8" x2="20" y2="8"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="16" x2="20" y2="16"/></svg>';menuBtn.addEventListener("click",ev=>{ev.stopPropagation();openStoneModal(r.id)});icon.appendChild(menuBtn);const attachedStones=game.rigStones[r.id]||[];if(attachedStones.length>0){const badge=document.createElement("div");badge.className="stone-badge";badge.textContent=attachedStones.length+"üîÆ";icon.appendChild(badge)}const meta=document.createElement("div");meta.className="meta";const name=document.createElement("div");name.className="name";name.textContent=r.title+(r.level>0?` ‚Ä¢ Lv ${r.level}`:"");const desc=document.createElement("div");desc.className="desc";desc.textContent=r.desc+(r.level>0?` ‚Äî ${fR(r.baseRate*r.level)} BTC/s`:"");const pw=document.createElement("div");pw.className="progress-wrap";const p=document.createElement("div");p.className="progress";p.style.width=(r.progress||0)+"%";pw.appendChild(p);meta.appendChild(name);meta.appendChild(desc);meta.appendChild(pw);const btn=document.createElement("button");btn.className="buy";if(r.level===0){const cost=cst(r,1);btn.textContent=cost<=0?"Free":`Buy ‚Çø ${cost.toFixed(5)}`}else{const nl=r.level+1;btn.textContent=`Upgrade ‚Çø ${cst(r,nl).toFixed(5)}`}if(!r.unlocked){btn.classList.add("locked");btn.disabled=!0}btn.addEventListener("click",ev=>{ev.stopPropagation();buy(idx,btn)});row.appendChild(icon);row.appendChild(meta);row.appendChild(btn);r._elements={row,icon,meta,name,desc,progress:p,btn};row.addEventListener("click",()=>{if(!r.unlocked)return;buy(idx,r._elements.btn)});rigListEl.appendChild(row)})}function fR(n){if(n>=1)return n.toFixed(2);if(n>=.01)return n.toFixed(3);return n.toFixed(5)}function buy(i,btn){const r=game.rigs[i],t=r.level===0?1:r.level+1,c=cst(r,t);if(game.btc+1e-12<c){playSound("error");fl("Not enough BTC");ps(btn,"#ff6b6b");return}playSound("buy");const oldTotal=game.totalLevels;game.btc-=c;game.stats.totalSpent+=c;game.stats.totalUpgrades++;r.level=t;game.totalLevels++;const newMilestone=Math.floor(game.totalLevels/10);const oldMilestone=Math.floor(oldTotal/10);if(newMilestone>oldMilestone){pendingSkillPointSource=btn;spModal.classList.add("show")}if(game.rigs[i+1])game.rigs[i+1].unlocked=!0;burst(btn);rUI();updateSkillPoints();svD()}function renderSkillTree(){motherboard.innerHTML="";const centerX=1000;const centerY=1000;const svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute("width","100%");svg.setAttribute("height","100%");motherboard.appendChild(svg);const defs=document.createElementNS("http://www.w3.org/2000/svg","defs");const gradient=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");gradient.setAttribute("id","lineGradient");gradient.innerHTML='<stop offset="0%" style="stop-color:rgba(0,224,255,0.8);stop-opacity:1"/><stop offset="100%" style="stop-color:rgba(0,224,255,0.3);stop-opacity:1"/>';defs.appendChild(gradient);svg.appendChild(defs);const connections=[[0,1],[0,2],[0,3],[0,4],[1,5],[1,6],[2,6],[2,7],[3,8],[4,9],[3,10],[4,11],[4,12],[5,13],[6,14],[6,15],[7,16],[10,17],[11,18],[11,19],[12,20],[13,21],[14,22],[15,22],[16,23],[18,24],[19,24],[20,24],[13,25],[16,26],[8,27],[9,28],[17,29],[20,30],[21,31],[22,32],[23,33],[24,34],[24,35],[24,36],[31,37],[33,38],[34,39],[36,40],[25,41],[26,42],[29,43],[30,44],[41,45],[42,46],[27,47],[28,48],[32,49],[49,45],[49,46]];connections.forEach(([fromId,toId])=>{const from=SKILLS.find(s=>s.id===fromId);const to=SKILLS.find(s=>s.id===toId);if(!from||!to)return;const x1=centerX+from.x;const y1=centerY+from.y;const x2=centerX+to.x;const y2=centerY+to.y;const line=document.createElementNS("http://www.w3.org/2000/svg","line");line.setAttribute("x1",x1);line.setAttribute("y1",y1);line.setAttribute("x2",x2);line.setAttribute("y2",y2);const unlocked=game.skills.includes(toId);const parentUnlocked=game.skills.includes(fromId);if(unlocked&&parentUnlocked){line.setAttribute("stroke","url(#lineGradient)");line.setAttribute("stroke-width","2.5");line.style.filter="drop-shadow(0 0 4px rgba(0,224,255,0.6))"}else{line.setAttribute("stroke","rgba(0,200,255,0.12)");line.setAttribute("stroke-width","1.5")}line.setAttribute("stroke-linecap","round");line.style.transition="all 0.3s";svg.appendChild(line)});SKILLS.forEach((skill)=>{const node=document.createElement("div");node.className="skill-node";const unlocked=game.skills.includes(skill.id);let canUnlock=false;if(skill.id===0){canUnlock=!unlocked}else{const connections=[[0,1],[0,2],[0,3],[0,4],[1,5],[1,6],[2,6],[2,7],[3,8],[4,9],[3,10],[4,11],[4,12],[5,13],[6,14],[6,15],[7,16],[10,17],[11,18],[11,19],[12,20],[13,21],[14,22],[15,22],[16,23],[18,24],[19,24],[20,24]];const parentConnection=connections.find(([from,to])=>to===skill.id);if(parentConnection){const parentId=parentConnection[0];canUnlock=game.skills.includes(parentId)&&!unlocked}}if(unlocked)node.classList.add("unlocked");else if(canUnlock)node.classList.add("available");else node.classList.add("locked");if(skill.id===0)node.classList.add("center");const x=centerX+skill.x;const y=centerY+skill.y;const nodeSize=skill.id===0?38:32;node.style.left=(x-nodeSize)+"px";node.style.top=(y-nodeSize)+"px";node.innerHTML=`<div class="skill-icon"><svg width="30" height="30" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="9" fill="${skill.color}18" stroke="${skill.color}" stroke-width="2"/><circle cx="12" cy="12" r="4" fill="${skill.color}" opacity="${unlocked?'0.6':'0.3'}"/></svg></div><div class="skill-name">${skill.name}</div><div class="skill-cost">${unlocked?"Owned":`${skill.cost}`}</div>`;node.addEventListener("click",()=>unlockSkill(skill.id));motherboard.appendChild(node)})}function unlockSkill(id){if(game.skills.includes(id)){playSound("error");fl("Already unlocked");return}const skill=SKILLS.find(s=>s.id===id);if(!skill)return;if(id!==0){const connections=[[0,1],[0,2],[0,3],[0,4],[1,5],[1,6],[2,6],[2,7],[3,8],[4,9],[3,10],[4,11],[4,12],[5,13],[6,14],[6,15],[7,16],[10,17],[11,18],[11,19],[12,20],[13,21],[14,22],[15,22],[16,23],[18,24],[19,24],[20,24]];const parentConnection=connections.find(([from,to])=>to===id);if(parentConnection){const parentId=parentConnection[0];if(!game.skills.includes(parentId)){playSound("error");fl("Unlock parent skill first!");return}}}if(game.skillPoints<skill.cost){playSound("error");fl("Not enough Skill Points");return}playSound("unlock");game.skillPoints-=skill.cost;game.skills.push(id);burst(event.target);fl(`Unlocked ${skill.name}!`);renderSkillTree();updateSkillPoints();svD()}function updateSkillPoints(){if(skillPointsEl)skillPointsEl.textContent=`Skill Points: ${game.skillPoints}`;if(spCount)spCount.textContent=game.skillPoints}function updateVaultDisplay(){if(vaultAmount)vaultAmount.textContent="‚Çø "+game.vault.toFixed(6);const totalEarned=game.stats.totalEarned||1;const percent=Math.min(100,(game.vault/totalEarned)*100);if(vaultPercent)vaultPercent.textContent=percent.toFixed(1)+"%";const coinCount=Math.min(39,Math.floor(game.vault));if(vaultCount)vaultCount.textContent=coinCount;coinStack.innerHTML='<div class="coin-stack-title">Coin Stack</div>';const col1=document.createElement("div");col1.className="coin-column";const col2=document.createElement("div");col2.className="coin-column";const col3=document.createElement("div");col3.className="coin-column";coinStack.appendChild(col1);coinStack.appendChild(col2);coinStack.appendChild(col3);const columns=[col1,col2,col3];const columnCoins=[[],[],[]];for(let i=0;i<coinCount;i++){const coin=document.createElement("div");coin.className="coin";const colIndex=i%3;columns[colIndex].appendChild(coin);columnCoins[colIndex].push(coin)}if(window.coinFlipInterval)clearInterval(window.coinFlipInterval);window.coinFlipInterval=setInterval(()=>{columnCoins.forEach((colCoins)=>{colCoins.forEach((coin,rowIndex)=>{setTimeout(()=>{coin.classList.add("flip");setTimeout(()=>coin.classList.remove("flip"),1200)},rowIndex*500)})})},7700)}function animateSkillPointParticle(particle){if(!spBadge||!particle)return;const phoneRect=P.getBoundingClientRect();const targetRect=spBadge.getBoundingClientRect();const endX=targetRect.left+targetRect.width/2-phoneRect.left;const endY=targetRect.top+targetRect.height/2-phoneRect.top;setTimeout(()=>{particle.style.transition="transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55)";particle.style.transform="translate(-50%, -50%) scale(0.4)";setTimeout(()=>{particle.style.transform="translate(-50%, -50%) scale(1.4)";setTimeout(()=>{particle.style.transition="all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)";particle.style.left=endX+"px";particle.style.top=endY+"px";particle.style.width="24px";particle.style.height="24px";particle.style.transform="translate(-50%, -50%) scale(0.5) rotate(720deg)";setTimeout(()=>{game.skillPoints++;updateSkillPoints();particle.style.opacity="0";spBadge.style.transform="scale(1.3)";spBadge.style.transition="transform 0.2s";setTimeout(()=>{spBadge.style.transform="scale(1)";if(particle.parentNode)particle.parentNode.removeChild(particle)},200)},600)},100)},150)},1000)}function getSkillMultiplier(){let speedMult=1;let costMult=1;game.skills.forEach(sid=>{const skill=SKILLS.find(s=>s.id===sid);if(!skill)return;if(skill.effect==="speed")speedMult*=skill.value;if(skill.effect==="cost")costMult*=skill.value});return{speed:speedMult,cost:costMult}}let lt=performance.now();function tk(){const now=performance.now();const dt=Math.min(.2,(now-lt)/1e3);lt=now;let earnedThisTick=0;const mult=getSkillMultiplier();for(const r of game.rigs){if(r.level<=0)continue;let stoneMult=1;const attachedStones=game.rigStones[r.id]||[];attachedStones.forEach(stoneId=>{const stone=STONES.find(s=>s.id===stoneId);if(stone&&stone.type==="profit")stoneMult*=stone.multiplier});let speedMult=1;attachedStones.forEach(stoneId=>{const stone=STONES.find(s=>s.id===stoneId);if(stone&&stone.type==="speed")speedMult*=stone.multiplier});const pps=r.baseRate*r.level*mult.speed*stoneMult*speedMult;const prod=pps*dt;earnedThisTick+=0;const cycleTime=r.cycleTime||1;const progressIncrement=(dt/cycleTime)*100;r.progress+=progressIncrement;if(r.progress>=100){game.btc+=prod;}r.progress=r.progress%100;if(r._elements&&r._elements.progress)r._elements.progress.style.width=r.progress+"%";if(r._elements&&r.level>0)r._elements.desc.textContent=r.desc+` ‚Äî ${fR(pps)} BTC/s`;if(r._elements&&r.level>0){r._elements.icon.style.transition="transform 0.3s ease";r._elements.icon.style.transform=`scale(${1+0.02*Math.sin(now/200+Math.random()*0.3)})`}}game.stats.totalEarned+=earnedThisTick;game.stats.playTime+=dt;if(btcDisplay)btcDisplay.textContent="‚Çø "+game.btc.toFixed(6);requestAnimationFrame(tk)}requestAnimationFrame(tk);function burst(el){if(!el)return;const rect=el.getBoundingClientRect(),pr=P.getBoundingClientRect(),cx=rect.left+rect.width/2-pr.left,cy=rect.top+rect.height/2-pr.top;const cnt=16;for(let i=0;i<cnt;i++){const p=document.createElement("div");p.style.position="absolute";p.style.left=cx+"px";p.style.top=cy+"px";const s=6+Math.random()*6;p.style.width=s+"px";p.style.height=s+"px";p.style.borderRadius="2px";p.style.pointerEvents="none";p.style.transform="translate(-50%,-50%)";p.style.background=`linear-gradient(90deg, ${rn()}, ${rn()})`;p.style.boxShadow="0 6px 18px rgba(0,200,255,0.12)";p.style.opacity="1";p.style.transition=`transform 700ms cubic-bezier(.2,.8,.2,1), opacity 700ms linear`;burstLayer.appendChild(p);const angle=Math.random()*Math.PI*2,dist=40+Math.random()*40;requestAnimationFrame(()=>{p.style.transform=`translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px) rotate(${Math.random()*360}deg)`;p.style.opacity="0"});setTimeout(()=>{if(p&&p.parentNode)p.parentNode.removeChild(p)},800)}}function rn(){const a=["#00e0ff","#7af0ff","#66f0ff","#8ef279","#ffd86b","#8b7aff"];return a[Math.floor(Math.random()*a.length)]}function fl(m){const e=document.createElement("div");e.textContent=m;e.style.position="absolute";e.style.left="50%";e.style.top="18px";e.style.transform="translateX(-50%)";e.style.padding="8px 12px";e.style.borderRadius="8px";e.style.background="linear-gradient(90deg, rgba(0,220,255,0.12), rgba(0,160,220,0.06))";e.style.border="1px solid rgba(0,200,255,0.12)";e.style.zIndex=9999;e.style.color="#eaffff";e.style.fontWeight="700";e.style.boxShadow="0 6px 18px rgba(0,200,255,0.06)";document.body.appendChild(e);setTimeout(()=>{e.style.transition="opacity 500ms";e.style.opacity="0";setTimeout(()=>e.remove(),600)},1e3)}function ps(el,c){const o=el.style.boxShadow;el.style.boxShadow=`0 6px 22px ${c}`;setTimeout(()=>el.style.boxShadow=o,400)}function updateStats(){const bps=game.rigs.reduce((sum,r)=>sum+(r.level>0?r.baseRate*r.level:0),0);document.getElementById("statBPS").textContent="‚Çø "+fR(bps);document.getElementById("statBPM").textContent="‚Çø "+fR(bps*60);document.getElementById("statBPH").textContent="‚Çø "+fR(bps*3600);document.getElementById("statTotal").textContent="‚Çø "+fR(game.stats.totalEarned);document.getElementById("statSpent").textContent="‚Çø "+fR(game.stats.totalSpent);document.getElementById("statUpgrades").textContent=game.stats.totalUpgrades;const mins=Math.floor(game.stats.playTime/60);const secs=Math.floor(game.stats.playTime%60);const hrs=Math.floor(mins/60);const displayMins=mins%60;if(hrs>0){document.getElementById("statTime").textContent=`${hrs}h ${displayMins}m`}else{document.getElementById("statTime").textContent=`${mins}m ${secs}s`}const rigsOwned=game.rigs.filter(r=>r.level>0).length;document.getElementById("statRigs").textContent=rigsOwned;let maxLvlRig=null;let maxLvl=0;for(const r of game.rigs){if(r.level>maxLvl){maxLvl=r.level;maxLvlRig=r}}if(maxLvlRig){document.getElementById("statMaxLvl").textContent=`${maxLvlRig.title} (Lv ${maxLvl})`}else{document.getElementById("statMaxLvl").textContent="None"}}function sv(){try{const s={missions:missions.map(m=>({id:m.id,claimed:!!m.claimed})),btc:game.btc,vault:game.vault,staking:game.staking,rigs:game.rigs.map(r=>({level:r.level,progress:r.progress,unlocked:r.unlocked})),skills:game.skills,skillPoints:game.skillPoints,totalLevels:game.totalLevels,stats:game.stats,stones:game.stones,rigStones:game.rigStones,time:Date.now()};localStorage.setItem(SAVE_KEY,JSON.stringify(s));game.lastSave=Date.now()}catch(e){console.warn("save failed",e)}}let sdT=null;function svD(){if(sdT)clearTimeout(sdT);sdT=setTimeout(()=>{sv();sdT=null},350)}function ld(){try{const raw=localStorage.getItem(SAVE_KEY);if(!raw)return;const s=JSON.parse(raw);game.btc=s.btc||0;game.vault=s.vault||0;game.skills=s.skills||[];game.skillPoints=s.skillPoints||0;game.totalLevels=s.totalLevels||0;game.stones=s.stones||[];game.rigStones=s.rigStones||{};
  // restore missions claimed state
  if(s.missions && Array.isArray(s.missions)){
    s.missions.forEach(ms=>{
      const m = missions.find(mm=>mm.id===ms.id);
      if(m) m.claimed = !!ms.claimed;
    });
  }
if(s.stats){game.stats=s.stats;if(!game.stats.playTime)game.stats.playTime=0}if(s.staking){game.staking=s.staking}else{game.staking={stakedAmount:0,interestEarned:0,lastUpdate:Date.now()}}if(s.rigs&&Array.isArray(s.rigs))s.rigs.forEach((rs,i)=>{if(game.rigs[i]){game.rigs[i].level=rs.level||0;game.rigs[i].progress=rs.progress||0;game.rigs[i].unlocked=rs.unlocked===void 0?game.rigs[i].unlocked:rs.unlocked}});if(game.totalLevels===0){game.totalLevels=game.rigs.reduce((sum,r)=>sum+r.level,0)}rUI();updateSkillPoints();updateVaultDisplay()}catch(e){console.warn("load failed",e)}}
// --- Missions system (added More page) ---
let missions = [
  {id:"m1",title:"Own 1 Rig",desc:"Have at least 1 rig (any)",check:()=>game.rigs.some(r=>r.level>0),reward:{btc:0.002,sp:0},claimed:false},
  {id:"m5",title:"Own 5 Rigs",desc:"Have 5 rigs with level > 0",check:()=>game.rigs.filter(r=>r.level>0).length>=5,reward:{btc:0.01,sp:1},claimed:false},
  {id:"m10",title:"Own 10 Rigs",desc:"Have 10 rigs with level > 0",check:()=>game.rigs.filter(r=>r.level>0).length>=10,reward:{btc:0.05,sp:2},claimed:false},
  {id:"s1",title:"Unlock 1 Skill",desc:"Unlock any 1 skill",check:()=>game.skills.length>=1,reward:{btc:0.005,sp:0},claimed:false},
  {id:"s3",title:"Unlock 3 Skills",desc:"Unlock 3 skills",check:()=>game.skills.length>=3,reward:{btc:0.02,sp:1},claimed:false},
  {id:"s5",title:"Unlock 5 Skills",desc:"Unlock 5 skills",check:()=>game.skills.length>=5,reward:{btc:0.05,sp:2},claimed:false},
  {id:"s10",title:"Unlock 10 Skills",desc:"Unlock 10 skills",check:()=>game.skills.length>=10,reward:{btc:0.15,sp:4},claimed:false},
  // empty slots for future missions
  {id:"slot1",title:"Empty Slot",desc:"Reserve for future content",check:()=>false,reward:{btc:0,sp:0},claimed:false},
  {id:"slot2",title:"Empty Slot",desc:"Reserve for future content",check:()=>false,reward:{btc:0,sp:0},claimed:false}
];

function renderMissions(){
  const el = document.getElementById("missionsList");
  if(!el) return;
  el.innerHTML = "";
  missions.forEach(m=>{
    const row = document.createElement("div");
    row.className = "mission"+(m.claimed?" claimed":"")+(m.check() && !m.claimed? "":" locked");
    const icon = document.createElement("div");
    icon.innerHTML = '<svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><circle cx="12" cy="12" r="9" stroke-opacity="0.08"/></svg>';
    const meta = document.createElement("div");
    meta.className = "meta";
    meta.innerHTML = '<div class="title">'+m.title+'</div><div class="desc">'+m.desc+'</div>';
    const claim = document.createElement("button");
    claim.className = "claim";
    claim.textContent = m.claimed ? "Claimed" : (m.check() ? "Claim" : "Locked");
    claim.disabled = m.claimed || !m.check();
    claim.addEventListener("click",()=>{
      if(m.claimed) return;
      if(!m.check()) return;
      // give rewards
      game.btc += m.reward.btc || 0;
      game.skillPoints = (game.skillPoints||0) + (m.reward.sp||0);
      m.claimed = true;
      playSound('buy');
      renderMissions();
      rUI(); updateSkillPoints(); svD();
      fl("Mission claimed: "+m.title);
    });
    row.appendChild(icon);
    row.appendChild(meta);
    row.appendChild(claim);
    el.appendChild(row);
  });
}

// helpers for claim all and refresh
function refreshMissions(){
  renderMissions();
}
function claimAllAvailable(){
  let any=false;
  missions.forEach(m=>{
    if(!m.claimed && m.check()){
      game.btc += m.reward.btc || 0;
      game.skillPoints = (game.skillPoints||0) + (m.reward.sp||0);
      m.claimed = true;
      any = true;
    }
  });
  if(any){
    playSound('buy');
    renderMissions(); rUI(); updateSkillPoints(); svD();
    fl("Claimed all available missions");
  } else {
    fl("No missions to claim");
  }
}

// wire buttons
document.addEventListener("DOMContentLoaded",()=>{
  const claimAllBtn = document.getElementById("claimAllBtn");
  const refreshBtn = document.getElementById("refreshMissionsBtn");
  if(claimAllBtn) claimAllBtn.addEventListener("click",claimAllAvailable);
  if(refreshBtn) refreshBtn.addEventListener("click",refreshMissions);
});

// expose render for load
window.renderMissions = renderMissions;
function resetMissions(){
  missions.forEach(m=>{m.claimed=false});
}
function renderStoneShop(){const el=document.getElementById("stoneShop");if(!el)return;el.innerHTML="";STONES.forEach(stone=>{const item=document.createElement("div");item.className="stone-item";const icon=document.createElement("div");icon.className="stone-icon";icon.textContent=stone.icon;const meta=document.createElement("div");meta.className="stone-meta";const name=document.createElement("div");name.className="stone-name";name.textContent=stone.name;const desc=document.createElement("div");desc.className="stone-desc";desc.textContent=(stone.type==="profit"?"Profit":"Speed")+" x"+stone.multiplier;meta.appendChild(name);meta.appendChild(desc);const buy=document.createElement("button");buy.className="stone-buy";const owned=game.stones.filter(s=>s===stone.id).length;buy.textContent=owned>0?`Own: ${owned} ‚Ä¢ ‚Çø${stone.cost.toFixed(3)}`:`Buy ‚Çø${stone.cost.toFixed(3)}`;buy.addEventListener("click",()=>{if(game.btc>=stone.cost){game.btc-=stone.cost;game.stones.push(stone.id);playSound("buy");renderStoneShop();updateQuickStats();rUI();svD();fl(`Bought ${stone.name}!`)}else{playSound("error");fl("Not enough BTC")}});item.appendChild(icon);item.appendChild(meta);item.appendChild(buy);el.appendChild(item)})}
function updateQuickStats(){const rigsOwned=game.rigs.filter(r=>r.level>0).length;const qRigs=document.getElementById("quickStatRigs");const qSP=document.getElementById("quickStatSP");const qStones=document.getElementById("quickStatStones");const qAttached=document.getElementById("quickStatAttached");if(qRigs)qRigs.textContent=rigsOwned;if(qSP)qSP.textContent=game.skillPoints||0;if(qStones)qStones.textContent=game.stones.length||0;let totalAttached=0;Object.values(game.rigStones||{}).forEach(stones=>{totalAttached+=stones.length});if(qAttached)qAttached.textContent=totalAttached}
const openMissionsBtn=document.getElementById("openMissionsBtn");const closeMissionsModal=document.getElementById("closeMissionsModal");const missionsModal=document.getElementById("missionsModal");if(openMissionsBtn){openMissionsBtn.addEventListener("click",()=>{playSound("nav");renderMissions();missionsModal.classList.add("show")})}if(closeMissionsModal){closeMissionsModal.addEventListener("click",()=>{playSound("click");missionsModal.classList.remove("show")})}
const openShopBtn=document.getElementById("openShopBtn");const closeShopModal=document.getElementById("closeShopModal");const shopModal=document.getElementById("shopModal");if(openShopBtn){openShopBtn.addEventListener("click",()=>{playSound("nav");renderStoneShop();shopModal.classList.add("show")})}if(closeShopModal){closeShopModal.addEventListener("click",()=>{playSound("click");shopModal.classList.remove("show")})}
const openQuickStatsBtn=document.getElementById("openQuickStatsBtn");const closeQuickStatsModal=document.getElementById("closeQuickStatsModal");const quickStatsModal=document.getElementById("quickStatsModal");if(openQuickStatsBtn){openQuickStatsBtn.addEventListener("click",()=>{playSound("nav");updateQuickStats();quickStatsModal.classList.add("show")})}if(closeQuickStatsModal){closeQuickStatsModal.addEventListener("click",()=>{playSound("click");quickStatsModal.classList.remove("show")})}function openStoneModal(rigId){const r=game.rigs.find(rr=>rr.id===rigId);if(!r){return}if(r.id==="basic"){playSound("error");fl("Cannot attach stones to this rig");return}if(r.level<50){playSound("error");fl("Rig must be Lv50+ to attach stones");return}currentStoneRigId=rigId;const modal=document.getElementById("stoneModal");const content=document.getElementById("stoneModalContent");content.innerHTML="";const title=document.createElement("div");title.style.cssText="font-size:11px;color:#9feaff99;margin-bottom:12px;text-align:center";title.textContent=`Attach to ${r.title} (Lv${r.level})`;content.appendChild(title);const attachedStones=game.rigStones[rigId]||[];const slotsContainer=document.createElement("div");slotsContainer.className="modal-stone-slots";for(let i=0;i<4;i++){const slot=document.createElement("div");slot.className="modal-stone-slot";if(i<attachedStones.length){slot.classList.add("filled");const stone=STONES.find(s=>s.id===attachedStones[i]);if(stone){slot.textContent=stone.icon;slot.title=stone.name}}else if(i===attachedStones.length){slot.classList.add("next-empty");slot.title="Click to attach stone"}slotsContainer.appendChild(slot)}content.appendChild(slotsContainer);if(attachedStones.length<4&&game.stones.length>0){const listTitle=document.createElement("div");listTitle.style.cssText="font-size:10px;color:#9feaff99;margin-bottom:8px;text-align:center";listTitle.textContent="Available Stones - Click slot above to select";content.appendChild(listTitle);const stoneList=document.createElement("div");stoneList.className="stone-list";game.stones.forEach(stoneId=>{const stone=STONES.find(s=>s.id===stoneId);if(!stone)return;const item=document.createElement("div");item.className="stone-attach-item";item.style.cursor="pointer";const icon=document.createElement("div");icon.className="stone-icon";icon.textContent=stone.icon;const meta=document.createElement("div");meta.className="stone-meta";const name=document.createElement("div");name.className="stone-name";name.textContent=stone.name;const desc=document.createElement("div");desc.className="stone-desc";desc.textContent=(stone.type==="profit"?"Profit":"Speed")+" x"+stone.multiplier;meta.appendChild(name);meta.appendChild(desc);item.addEventListener("click",()=>{if(attachedStones.length>=4){playSound("error");fl("All slots full");return}if(!game.rigStones[rigId])game.rigStones[rigId]=[];game.rigStones[rigId].push(stoneId);const stoneIdx=game.stones.indexOf(stoneId);if(stoneIdx>-1)game.stones.splice(stoneIdx,1);playSound("unlock");openStoneModal(rigId);rUI();svD();fl(`Attached ${stone.name}!`)});item.appendChild(icon);item.appendChild(meta);stoneList.appendChild(item)});content.appendChild(stoneList)}else if(attachedStones.length>=4){const full=document.createElement("div");full.style.cssText="font-size:10px;color:#9feaff77;text-align:center;padding:12px;margin-top:8px";full.textContent="All stone slots filled!";content.appendChild(full)}else if(game.stones.length===0){const empty=document.createElement("div");empty.style.cssText="font-size:10px;color:#9feaff77;text-align:center;padding:12px;margin-top:8px";empty.textContent="No stones available. Buy from shop.";content.appendChild(empty)}modal.classList.add("show");playSound("nav")}
const closeStoneModal=document.getElementById("closeStoneModal");if(closeStoneModal){closeStoneModal.addEventListener("click",()=>{document.getElementById("stoneModal").classList.remove("show");playSound("click")})}

// persist missions in save/load by extending sv() and ld() - we'll patch by appending missions state handlers to sv and ld later
ld();rUI();renderSkillTree();setInterval(()=>sv(),2e4);window.addEventListener("keydown",e=>{if(e.key==="1"){game.btc+=.01;rUI();fl("+0.01 BTC")}if(e.key==="2"){game.btc+=.1;rUI();fl("+0.1 BTC")}if(e.key==="3"){game.skillPoints+=10;updateSkillPoints();fl("+10 Skill Points")}if(e.key==="v"||e.key==="V"){game.vault+=0.1;updateVaultDisplay();fl("+0.1 BTC to Vault")}if(e.key==="r"){localStorage.removeItem(SAVE_KEY);ig();game.btc=0;game.vault=0;game.skillPoints=0;game.totalLevels=0;game.skills=[];game.stats={totalEarned:0,totalSpent:0,totalUpgrades:0,startTime:Date.now(),playTime:0};missions.forEach(m=>{m.claimed=false});rUI();renderMissions();fl("Hard Reset")}});if(skillTreeWrapper){let isDragging=false;let startX=0;let startY=0;let currentX=0;let currentY=0;let dragStartTime=0;let hasMoved=false;skillTreeWrapper.addEventListener("mousedown",e=>{if(e.target.closest(".skill-node"))return;isDragging=true;hasMoved=false;dragStartTime=Date.now();startX=e.pageX;startY=e.pageY;const rect=motherboard.getBoundingClientRect();const wrapperRect=skillTreeWrapper.getBoundingClientRect();currentX=rect.left+rect.width/2-wrapperRect.left;currentY=rect.top+rect.height/2-wrapperRect.top;skillTreeWrapper.style.cursor="grabbing"});skillTreeWrapper.addEventListener("mousemove",e=>{if(!isDragging)return;e.preventDefault();const dx=e.pageX-startX;const dy=e.pageY-startY;if(Math.abs(dx)>3||Math.abs(dy)>3){hasMoved=true}const newX=currentX+dx;const newY=currentY+dy;motherboard.style.left=newX+"px";motherboard.style.top=newY+"px";motherboard.style.transform=`translate(-50%, -50%) scale(${zoomLevel})`});skillTreeWrapper.addEventListener("mouseup",()=>{isDragging=false;skillTreeWrapper.style.cursor="grab"});skillTreeWrapper.addEventListener("mouseleave",()=>{isDragging=false;skillTreeWrapper.style.cursor="grab"});skillTreeWrapper.addEventListener("wheel",e=>{if(e.ctrlKey||e.metaKey){e.preventDefault();const delta=e.deltaY>0?-0.1:0.1;zoomLevel=Math.max(0.25,Math.min(2.5,zoomLevel+delta));applyZoom()}},{passive:false});let lastTouchDistance=0;let touchStartX=0;let touchStartY=0;skillTreeWrapper.addEventListener("touchstart",e=>{if(e.touches.length===2){lastTouchDistance=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY)}else if(e.touches.length===1){if(e.target.closest(".skill-node"))return;isDragging=true;hasMoved=false;touchStartX=e.touches[0].pageX;touchStartY=e.touches[0].pageY;const rect=motherboard.getBoundingClientRect();const wrapperRect=skillTreeWrapper.getBoundingClientRect();currentX=rect.left+rect.width/2-wrapperRect.left;currentY=rect.top+rect.height/2-wrapperRect.top}});skillTreeWrapper.addEventListener("touchmove",e=>{if(e.touches.length===2){e.preventDefault();const distance=Math.hypot(e.touches[0].pageX-e.touches[1].pageX,e.touches[0].pageY-e.touches[1].pageY);if(lastTouchDistance>0){const delta=(distance-lastTouchDistance)*0.01;zoomLevel=Math.max(0.25,Math.min(2.5,zoomLevel+delta));applyZoom()}lastTouchDistance=distance}else if(e.touches.length===1&&isDragging){e.preventDefault();const dx=e.touches[0].pageX-touchStartX;const dy=e.touches[0].pageY-touchStartY;if(Math.abs(dx)>3||Math.abs(dy)>3){hasMoved=true}const newX=currentX+dx;const newY=currentY+dy;motherboard.style.left=newX+"px";motherboard.style.top=newY+"px";motherboard.style.transform=`translate(-50%, -50%) scale(${zoomLevel})`}},{passive:false});skillTreeWrapper.addEventListener("touchend",()=>{isDragging=false;lastTouchDistance=0});motherboard.style.position="absolute";centerSkillTree()}
let stakingHandlersInitialized=false;
function updateStakingInterest(){if(!game||!game.staking)return;const now=Date.now();const elapsed=(now-game.staking.lastUpdate)/1000;const apy=0.1;const interestPerSecond=game.staking.stakedAmount*(apy/(365*24*60*60));game.staking.interestEarned+=interestPerSecond*elapsed;game.staking.lastUpdate=now;}
function updateStakingUI(){if(!game||!game.staking)return;updateStakingInterest();const availBal=document.getElementById("availableBalance");const stakedAmt=document.getElementById("stakedAmount");const intEarned=document.getElementById("interestEarned");const totalVal=document.getElementById("totalStakingValue");if(availBal)availBal.textContent=game.btc.toFixed(8)+" BTC";if(stakedAmt)stakedAmt.textContent=game.staking.stakedAmount.toFixed(8)+" BTC";if(intEarned)intEarned.textContent="+"+ game.staking.interestEarned.toFixed(8)+" BTC";if(totalVal)totalVal.textContent=(game.staking.stakedAmount+game.staking.interestEarned).toFixed(8)+" BTC";}
function initStakingHandlers(){if(stakingHandlersInitialized)return;if(!game.staking){game.staking={stakedAmount:0,interestEarned:0,lastUpdate:Date.now()}}const stakeBtn=document.getElementById("stakeBtn");const unstakeBtn=document.getElementById("unstakeBtn");if(stakeBtn){stakeBtn.onclick=()=>{if(!game||!game.staking){game.staking={stakedAmount:0,interestEarned:0,lastUpdate:Date.now()}}if(game.btc>0){game.staking.stakedAmount+=game.btc;game.btc=0;updateStakingInterest();game.staking.lastUpdate=Date.now();updateStakingUI();updateUI();sv();}else{fl("No BTC to stake")}}}if(unstakeBtn){unstakeBtn.onclick=()=>{if(!game||!game.staking){game.staking={stakedAmount:0,interestEarned:0,lastUpdate:Date.now()}}updateStakingInterest();const total=game.staking.stakedAmount+game.staking.interestEarned;if(total>0){game.btc+=total;game.staking.stakedAmount=0;game.staking.interestEarned=0;game.staking.lastUpdate=Date.now();updateStakingUI();updateUI();sv()}else{fl("Nothing to unstake")}}}stakingHandlersInitialized=true}
setInterval(()=>{if(game&&game.staking&&game.staking.stakedAmount>0){const stakingPg=document.getElementById("stakingPage");if(stakingPg&&stakingPg.classList.contains("active")){updateStakingUI();}}},1000);
</script></body></html>
